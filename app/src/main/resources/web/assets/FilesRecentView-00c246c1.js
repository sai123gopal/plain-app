import{d as W,u as X,r as k,c as J,s as Q,bl as q,a1 as H,aA as P,K as Y,e as a,f as c,x as V,L as Z,w as E,j as i,g as h,t as d,h as o,F as b,A as ee,ag as te,bc as se,o as n,z as oe,bd as S,be as F,at as ae,U as ne,m as ce,au as le,av as ie,bg as de,aE as re,ah as ue,bj as _e,bk as pe,_ as he}from"./index-391e08bf.js";import{_ as me}from"./Breadcrumb-db40a1f3.js";import{n as ve}from"./list-6498ebd9.js";const ke=_=>(le("data-v-fa77ce57"),_=_(),ie(),_),be={class:"v-toolbar"},fe={class:"right-actions"},ge=["onClick"],we=ke(()=>c("md-ripple",null,null,-1)),ye={class:"form-check-label"},Ce=["checked"],De={class:"panel-container"},Te={key:0,class:"file-items"},Ie=["onClick","onDblclick","onContextmenu"],Ve=["checked"],Ee=["src"],Se={class:"title"},Fe={style:{"font-size":"0.75rem"}},Re={key:1,class:"no-data-placeholder"},xe={key:0,class:"file-item-info"},Ae=W({__name:"FilesRecentView",setup(_){const{t:m}=X(),R=k([]),u=k(!1),f=J(),{app:g,urlTokenKey:w}=Q(f),{loading:x,files:r}=q(w),{downloadFile:y,downloadDir:A,downloadFiles:N}=te(w),{view:C}=_e(R,(e,t)=>{f.lightbox={sources:e,index:t,visible:!0}}),p=k(null),{mutate:$,onDone:z}=H({document:se,appApi:!0});z(e=>{N(e.data.setTempValue.key),r.value.forEach(t=>{t.checked=!1})});const D=()=>{const e=[];return r.value.forEach(t=>{t.checked&&e.push({path:t.path})}),e};function L(e){u.value=e.target.checked}const M=()=>{$({key:de(),value:JSON.stringify(D())})},U=P(()=>D().length>0);function B(e){if(u.value){e.checked=!e.checked;return}p.value=e}function T(e){return S(e.name)||F(e.name)||pe(e.name)}function G(e){T(e)?C(r.value,e):y(e.path)}function K(e,t){e.preventDefault();let l;t.isDir?l=[{label:m("download"),onClick:()=>{A(t.path)}}]:(l=[],T(t)&&l.push({label:m("open"),onClick:()=>{C(r.value,t)}}),l.push({label:m("download"),onClick:()=>{y(t.path)}})),re({x:e.x,y:e.y,items:l})}return(e,t)=>{const l=me,O=ue,j=Y("tooltip");return n(),a(b,null,[c("div",be,[V(l,{current:e.$t("recent_files")},null,8,["current"]),c("div",fe,[u.value&&U.value?Z((n(),a("button",{key:0,class:"icon-button",onClick:E(M,["stop"])},[we,V(O)],8,ge)),[[j,e.$t("download")]]):i("",!0),c("label",ye,[c("md-checkbox",{"touch-target":"wrapper",onChange:L,checked:u.value},null,40,Ce),h(d(e.$t("select_mode")),1)])])]),c("div",De,[o(g).permissions.includes("WRITE_EXTERNAL_STORAGE")?(n(),a("div",Te,[(n(!0),a(b,null,ee(o(r),s=>{var I;return n(),a("div",{key:s.path,class:oe(["file-item",{active:((I=p.value)==null?void 0:I.path)===s.path}]),onClick:v=>B(s),onDblclick:E(v=>G(s),["prevent"]),onContextmenu:v=>K(v,s)},[u.value?(n(),a("md-checkbox",{key:0,"touch-target":"wrapper",checked:s.checked},null,8,Ve)):i("",!0),o(S)(s.name)||o(F)(s.name)?(n(),a("img",{key:1,src:o(ae)(s.fileId)+"&w=50&h=50",width:"50",height:"50"},null,8,Ee)):i("",!0),c("div",Se,[h(d(s.name)+" ",1),c("div",Fe,[h(d(o(ne)(s.updatedAt)),1),s.isDir?i("",!0):(n(),a(b,{key:0},[h(", "+d(o(ce)(s.size)),1)],64))])])],42,Ie)}),128))])):i("",!0),o(r).length===0?(n(),a("div",Re,d(e.$t(o(ve)(o(x),o(g).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):i("",!0)]),p.value?(n(),a("div",xe,d(e.$t("path"))+": "+d(p.value.path),1)):i("",!0)],64)}}});const Le=he(Ae,[["__scopeId","data-v-fa77ce57"]]);export{Le as default};

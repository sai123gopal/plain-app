import{h as y,aE as k,g as K,C,Z as E,b_ as S}from"./index-Dn0O6zoH.js";const P=f=>{const n=y(!1),c=y(!1),i=y(0),e=y([]),s=y(null),a=y([]),l=y(!1),r=t=>{t?n.value=f.value.every(u=>e.value.includes(u.id)):(n.value=!1,c.value=!1)},v=t=>{const u=Math.min(s.value,t),o=Math.max(s.value,t),p=f.value[s.value].id;return f.value.slice(u,o+1).map(m=>m.id).filter(m=>m!==p)},h=(t,u)=>{if(s.value!==null&&s.value!==u&&a.value.length>0){if(l.value)for(const o of a.value)e.value.includes(o)||e.value.push(o);else e.value=e.value.filter(o=>!a.value.includes(o));a.value=[],s.value=u,l.value=e.value.includes(t.id),r(l)}else d(!e.value.includes(t.id),t,u)},d=(t,u,o)=>{t?e.value.push(u.id):e.value=e.value.filter(p=>p!==u.id),s.value=o,l.value=t,r(t)},g=()=>{n.value=!0,e.value=f.value.map(t=>t.id)};return{realAllChecked:c,allChecked:n,toggleAllChecked:t=>{t.target.checked?g():(n.value=!1,c.value=!1,e.value=[])},selectAll:g,allCheckedAlertVisible:k(()=>n.value&&!c.value&&e.value.length<i.value),selectRealAll:()=>{c.value=!0},clearSelection:()=>{n.value=!1,c.value=!1,e.value=[],s.value=null,l.value=!1,a.value=[]},selectedIds:e,total:i,checked:k(()=>e.value.length>0),shouldSelect:l,shiftEffectingIds:a,toggleSelect:(t,u,o)=>{t.shiftKey?h(u,o):d(!e.value.includes(u.id),u,o)},handleItemClick(t,u,o,p=()=>{}){if(t.target.nodeName==="MD-CHECKBOX")return;const m=window.getSelection();if(!(m&&m.toString())){if(e.value.length===0){p(o);return}t.shiftKey?h(u,o):d(!e.value.includes(u.id),u,o)}},handleMouseOver(t,u){t.shiftKey?s.value!==null&&s.value!==u&&(a.value=v(u)):a.value=[]}}},D=(f,n)=>{const{t:c}=K();return{deleteItems:(i,e,s,a)=>{let l=a;if(!e){if(i.length===0){C(c("select_first"),"error");return}l=`ids:${i.join(",")}`}E(S,{gql:f,count:e?s:i.length,variables:()=>({query:l}),done:n})}}},I=(f,n,c,i,e,s,a)=>({keyDown:l=>{var h,d;if(document.querySelector("md-dialog[open]"))return;const r=(h=document.getElementsByClassName("scroll-content"))==null?void 0:h[0];l.shiftKey?r==null||r.style.setProperty("user-select","none"):r==null||r.style.removeProperty("user-select");const v=(d=document.getElementsByClassName("scroller"))==null?void 0:d[0];if(l.shiftKey?v==null||v.style.setProperty("user-select","none"):v==null||v.style.removeProperty("user-select"),(l.ctrlKey||l.metaKey)&&l.key==="a"){l.preventDefault(),i();return}if(l.key==="Escape")e();else if(l.key==="ArrowLeft")c.value>1&&s(c.value-1);else if(l.key==="ArrowRight"){const g=Math.ceil(f.value/n);c.value<g&&s(c.value+1)}else(l.key==="Delete"||(l.ctrlKey||l.metaKey)&&l.key==="Backspace")&&a()},keyUp:l=>{var v;const r=(v=document.getElementsByClassName("scroll-content"))==null?void 0:v[0];r==null||r.style.removeProperty("user-select")}}),A=(f,n,c,i)=>({keyDown:e=>{var l,r;if(document.querySelector("md-dialog[open]"))return;const s=(l=document.getElementsByClassName("scroll-content"))==null?void 0:l[0];e.shiftKey?s==null||s.style.setProperty("user-select","none"):s==null||s.style.removeProperty("user-select");const a=(r=document.getElementsByClassName("scroller"))==null?void 0:r[0];if(e.shiftKey?a==null||a.style.setProperty("user-select","none"):a==null||a.style.removeProperty("user-select"),(e.ctrlKey||e.metaKey)&&e.key==="a"){e.preventDefault(),n();return}e.key==="Escape"?c():(e.key==="Delete"||(e.ctrlKey||e.metaKey)&&e.key==="Backspace")&&i()},keyUp:e=>{var a;const s=(a=document.getElementsByClassName("scroll-content"))==null?void 0:a[0];s==null||s.style.removeProperty("user-select")}});export{I as a,D as b,A as c,P as u};

import{_ as b}from"./LeftSidebar.vuevuetypescriptsetuptruelang-B6Ke7euJ.js";import{_ as I}from"./TagFilter.vuevuetypescriptsetuptruelang-uBMdMrN4.js";import{d as N,u as V,s as A,i as Q,I as M,h as _,K as R,k as z,v as P,q as y,af as x,a6 as g,a0 as D,o as u,V as E,t as s,a,w as h,N as C,m as k,c as m,e as S,P as F,O as G,p as K,a7 as O,f as $,a8 as j}from"./index-Dn0O6zoH.js";import{u as H}from"./search-DrT1IjAg.js";import"./more-vert-De1QBMLo.js";import"./EditValueModal-Du2st8tU.js";import"./vee-validate.esm-0lx5owW0.js";const J={class:"nav"},U={class:"title"},W={key:0,class:"count"},X=["onClick"],Y={class:"title"},Z={key:0,class:"count"},ie=N({__name:"CallsSidebar",setup(ee){const d=V(),{counter:p}=A(Q()),{parseQ:B}=H(),o=M({tagIds:[]}),n=_(""),l=_(""),c=_(new Map),{fetch:L}=R({handle:e=>{e&&(p.value.calls=e.total,c.value.set("1",e.incoming),c.value.set("2",e.outgoing),c.value.set("3",e.missed))},document:x,variables:()=>({}),appApi:!0});function v(e){return c.value.get(e)??-1}function f(){var i;const e=g.currentRoute.value,r=D(((i=e.query.q)==null?void 0:i.toString())??"");B(o,r),n.value=o.type??"",l.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(l.value=""),L()}f(),z(()=>g.currentRoute.value,()=>{f()});function q(e){const r=O([{name:"type",op:"",value:e}]);$(d,`/calls?q=${j(r)}`)}function w(){$(d,"/calls")}return(e,r)=>{const i=I,T=b;return u(),P(T,null,{title:y(()=>[E(s(e.$t("page_title.calls")),1)]),body:y(()=>[a("ul",J,[a("li",{onClick:h(w,["prevent"]),class:C({active:!l.value&&!n.value})},[a("span",U,s(e.$t("all")),1),k(p).calls>=0?(u(),m("span",W,s(k(p).calls.toLocaleString()),1)):S("",!0)],2),(u(),m(G,null,F(["1","2","3"],t=>a("li",{key:t,onClick:h(te=>q(t),["prevent"]),class:C({active:t===n.value})},[a("span",Y,s(e.$t(`call_type.${t}`)),1),v(t)>=0?(u(),m("span",Z,s(v(t).toLocaleString()),1)):S("",!0)],10,X)),64))]),K(i,{type:"CALL",selected:l.value},null,8,["selected"])]),_:1})}}});export{ie as default};

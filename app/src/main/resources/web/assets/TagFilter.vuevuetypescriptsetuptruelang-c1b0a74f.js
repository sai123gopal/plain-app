import{d as k,u as A,q as x,r as E,i as L,t as M,bt as S,o as i,c as r,e as l,k as $,g as c,w as g,F as f,A as q,z as N,j as Q,bu as _,a1 as u,Z as b,bv as V,E as B,B as D,V as G,bw as I,bx as w}from"./index-5f5c60b6.js";import{c as F}from"./index-23cdd2f2.js";import{_ as y}from"./EditValueModal.vuevuetypescriptsetuptruelang-27a0512e.js";import{_ as O}from"./DeleteConfirm.vuevuetypescriptsetuptruelang-42857978.js";const z={class:"nav-title mt-4"},j=["onClick"],H={class:"nav"},P=["onClick","onContextmenu"],J=k({__name:"TagFilter",props:{tagType:{type:String,required:!0},selected:{type:String,required:!0}},setup(s){const o=s,{t:n}=A(),C=x(),d=E([]),{refetch:p}=L({handle:(e,a)=>{a?M(n(a),"error"):e&&(d.value=e.tags)},document:S,variables:{type:o.tagType},appApi:!0});function v(){u(y,{title:n("add_tag"),placeholder:n("name"),mutation:()=>b({document:V,options:{update:()=>{p()}},appApi:!0}),getVariables:e=>({type:o.tagType,name:e})})}function T(e){const a=B([{name:"tag",op:"",value:_(e.name)}]);D(C,`/${{NOTE:"notes",AUDIO:"audios",IMAGE:"images",VIDEO:"videos",FEED_ENTRY:"feeds",SMS:"messages",CALL:"calls",CONTACT:"contacts",AI_CHAT:"aichats"}[o.tagType]}?q=${G(a)}`)}function h(e,a){e.preventDefault(),F({x:e.x,y:e.y,items:[{label:n("rename"),onClick:()=>{u(y,{title:n("rename"),placeholder:n("name"),value:a.name,mutation:()=>b({document:I,appApi:!0}),getVariables:t=>({id:a.id,name:t}),done:()=>{p()}})}},{label:n("delete"),onClick:()=>{u(O,{id:a.id,name:a.name,gql:w,appApi:!0,typeName:"Tag"})}}]})}return(e,a)=>(i(),r(f,null,[l("h2",z,[$(c(e.$t("tags"))+" ",1),l("button",{class:"btn btn-sm",type:"button",onClick:g(v,["prevent"])},c(e.$t("add")),9,j)]),l("ul",H,[(i(!0),r(f,null,q(d.value,t=>(i(),r("li",{onClick:g(m=>T(t),["prevent"]),key:t.id,onContextmenu:m=>h(m,t),class:N({active:s.selected&&Q(_)(t.name)===s.selected})},c(t.name),43,P))),128))])],64))}});export{J as _};

import{o as n,e as o,f as t,d as U,u as j,r as h,a1 as $,H as J,I as v,J as K,i as W,k as b,K as O,x as d,F as P,L as y,h as s,t as q,j as p,bo as X,bp as Y,bq as ee,br as te,au as ne,av as oe,_ as se}from"./index-6d72ad8d.js";import{_ as re}from"./Breadcrumb-2d824363.js";const ae={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ie=t("path",{fill:"currentColor",d:"M6 19q-.425 0-.713-.288T5 18v-3q0-.425.288-.713T6 14q.425 0 .713.288T7 15v2h2q.425 0 .713.288T10 18q0 .425-.288.713T9 19H6Zm0-9q-.425 0-.713-.288T5 9V6q0-.425.288-.713T6 5h3q.425 0 .713.288T10 6q0 .425-.288.713T9 7H7v2q0 .425-.288.713T6 10Zm9 9q-.425 0-.713-.288T14 18q0-.425.288-.713T15 17h2v-2q0-.425.288-.713T18 14q.425 0 .713.288T19 15v3q0 .425-.288.713T18 19h-3Zm3-9q-.425 0-.713-.288T17 9V7h-2q-.425 0-.713-.288T14 6q0-.425.288-.713T15 5h3q.425 0 .713.288T19 6v3q0 .425-.288.713T18 10Z"},null,-1),ce=[ie];function le(r,a){return n(),o("svg",ae,ce)}const _e={name:"material-symbols-fullscreen-rounded",render:le},ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},de=t("path",{fill:"currentColor",d:"M12 20q-3.35 0-5.675-2.325T4 12q0-3.35 2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V5q0-.425.288-.713T19 4q.425 0 .713.288T20 5v5q0 .425-.288.713T19 11h-5q-.425 0-.713-.288T13 10q0-.425.288-.713T14 9h3.2q-.8-1.4-2.188-2.2T12 6Q9.5 6 7.75 7.75T6 12q0 2.5 1.75 4.25T12 18q1.725 0 3.188-.913t2.187-2.437q.125-.275.413-.463t.587-.187q.575 0 .863.4t.062.9q-.95 2.125-2.925 3.413T12 20Z"},null,-1),pe=[de];function me(r,a){return n(),o("svg",ue,pe)}const he={name:"material-symbols-refresh-rounded",render:me},ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},qe=t("path",{fill:"currentColor",d:"M12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Zm0-10Zm0 8q3.325 0 5.663-2.337T20 12q0-3.325-2.337-5.663T12 4Q8.675 4 6.337 6.337T4 12q0 3.325 2.337 5.663T12 20Zm-3-4h6q.425 0 .713-.288T16 15V9q0-.425-.288-.713T15 8H9q-.425 0-.713.288T8 9v6q0 .425.288.713T9 16Z"},null,-1),fe=[qe];function ge(r,a){return n(),o("svg",ve,fe)}const Te={name:"material-symbols-stop-circle-outline-rounded",render:ge},$e="/assets/screen-mirror-permission-e9e07af8.png",be={xmlns:"http://www.w3.org/2000/svg",viewBox:"176.31 -11.19 346.88 581.88"},ye=t("path",{d:"M470.49 0H229.51a41.901 41.901 0 0 0-29.547 12.277 41.898 41.898 0 0 0-12.277 29.547v476.35a41.901 41.901 0 0 0 12.277 29.547 41.898 41.898 0 0 0 29.547 12.277h240.98a41.901 41.901 0 0 0 29.547-12.277 41.898 41.898 0 0 0 12.277-29.547V41.824a41.901 41.901 0 0 0-12.277-29.547A41.898 41.898 0 0 0 470.49 0zm33.25 518.18a33.334 33.334 0 0 1-9.766 23.484 33.335 33.335 0 0 1-23.484 9.766H229.51a33.334 33.334 0 0 1-23.484-9.766 33.335 33.335 0 0 1-9.765-23.484V41.83a33.333 33.333 0 0 1 9.828-23.371 33.32 33.32 0 0 1 23.422-9.703h240.98a33.334 33.334 0 0 1 23.484 9.765 33.335 33.335 0 0 1 9.765 23.484z"},null,-1),Me=t("path",{d:"M317.62 46.812h64.75c2.418 0 4.375-1.957 4.375-4.375s-1.957-4.375-4.375-4.375h-64.75c-2.418 0-4.375 1.957-4.375 4.375s1.957 4.375 4.375 4.375zM364.7 192.5a16.8 16.8 0 0 0-14.7-8.75 16.8 16.8 0 0 0-14.698 8.75l-91 157.5a16.453 16.453 0 0 0 0 16.977 16.584 16.584 0 0 0 6.101 6.386 16.653 16.653 0 0 0 8.512 2.364h182.09a16.626 16.626 0 0 0 14.7-8.75 16.803 16.803 0 0 0 0-16.977zm83.562 170.36a8.224 8.224 0 0 1-7.262 4.2H258.91a8.229 8.229 0 0 1-7.176-4.2 8.753 8.753 0 0 1 0-8.75l91-157.5a8.748 8.748 0 0 1 7.262-4.113 8.757 8.757 0 0 1 7.262 4.199l91 157.5a8.75 8.75 0 0 1 0 8.84z"},null,-1),ke=t("path",{d:"M350 221.55a4.288 4.288 0 0 0-4.29 4.285v66.238a4.375 4.375 0 0 0 8.75 0v-66.238a4.286 4.286 0 0 0-4.46-4.285zm0 91.26a4.289 4.289 0 0 0-4.29 4.29v17.061a4.375 4.375 0 0 0 8.75 0V317.1a4.286 4.286 0 0 0-4.46-4.29z"},null,-1),Se=[ye,Me,ke];function we(r,a){return n(),o("svg",be,Se)}const Ie={render:we},m=r=>(ne("data-v-7d0c3608"),r=r(),oe(),r),Ve={class:"page-container"},Ce={class:"main"},Ae={class:"v-toolbar"},He=["disabled"],Le=m(()=>t("md-ripple",null,null,-1)),Ze=m(()=>t("md-ripple",null,null,-1)),xe=m(()=>t("md-ripple",null,null,-1)),ze={key:0,class:"loading"},Be=m(()=>t("md-circular-progress",{indeterminate:""},null,-1)),De=[Be],Qe={key:1,class:"request-permission"},Ee=m(()=>t("img",{src:$e},null,-1)),Fe={class:"text"},Ge={key:2,class:"request-permission-failed"},Ne=["src"],Re=U({__name:"ScreenMirrorView",setup(r){let a;const{t:f}=j(),i=h(""),_=h(0),u=h(!1),M=h(),k=async e=>{i.value=e,u.value=!1,_.value=0,clearInterval(a)};let c=!1;const{mutate:I}=$({document:X,appApi:!0}),V=()=>{I(),c=!0},S=e=>{e&&c&&(c=!1,clearInterval(a),g())};J(()=>{v.on("screen_mirrorring",k),v.on("app_socket_connection_changed",S)}),K(()=>{v.off("screen_mirrorring",k),v.off("app_socket_connection_changed",S)});const{mutate:C,loading:A,onDone:H,onError:L}=$({document:Y,appApi:!0}),{loading:Z,refetch:x}=W({handle:(e,l)=>{l?b(f(l),"error"):(i.value=e.screenMirrorImage,e.screenMirrorImage||g())},document:ee,appApi:!0}),z=()=>{var e;(e=M.value)==null||e.requestFullscreen({navigationUI:"show"})},g=()=>{u.value=!1,C()};L(e=>{b(f(e.message)),u.value=!0}),H(()=>{_.value=30,a=setInterval(()=>{_.value--,_.value<=0&&(u.value=!0,clearInterval(a))},1e3)});const{mutate:w,loading:B,onDone:D,onError:Q}=$({document:te,appApi:!0});return Q(e=>{b(f(e.message))}),D(()=>{u.value=!0,i.value=""}),(e,l)=>{const E=re,F=Te,G=he,N=_e,T=O("tooltip");return n(),o("div",Ve,[t("div",Ce,[t("div",Ae,[d(E,{current:()=>e.$t("screen_mirror")},null,8,["current"]),i.value?(n(),o(P,{key:0},[y((n(),o("button",{class:"icon-button",disabled:s(B),onClick:l[0]||(l[0]=(...R)=>s(w)&&s(w)(...R))},[Le,d(F)],8,He)),[[T,e.$t("stop_mirror")]]),y((n(),o("button",{class:"icon-button",onClick:l[1]||(l[1]=()=>s(x)())},[Ze,d(G)])),[[T,e.$t("refresh")]]),y((n(),o("button",{class:"icon-button",onClick:z},[xe,d(N)])),[[T,e.$t("fullscreen")]])],64)):s(c)?p("",!0):(n(),o("md-outlined-button",{key:1,onClick:V},q(e.$t("relaunch_app")),1))]),t("div",{ref_key:"containerRef",ref:M,class:"panel-container"},[s(Z)||s(A)||s(c)?(n(),o("div",ze,De)):p("",!0),_.value>0&&!s(c)?(n(),o("div",Qe,[Ee,t("pre",Fe,q(e.$t("screen_mirror_request_permission",{seconds:_.value})),1)])):p("",!0),u.value&&!i.value&&!s(c)?(n(),o("div",Ge,[d(s(Ie)),t("p",null,q(e.$t("screen_mirror_request_permission_failed")),1),t("md-filled-button",{onClick:g},q(e.$t("try_again")),1)])):p("",!0),i.value?(n(),o("img",{key:3,src:i.value},null,8,Ne)):p("",!0)],512)])])}}});const Je=se(Re,[["__scopeId","data-v-7d0c3608"]]);export{Je as default};

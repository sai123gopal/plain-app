import{_ as N}from"./LeftSidebar.vuevuetypescriptsetuptruelang-BWG8gajF.js";import{_ as V}from"./TagFilter.vuevuetypescriptsetuptruelang-DySu9lzm.js";import{d as A,u as M,s as Q,i as R,I as z,h as d,K as D,k as P,af as x,a1 as h,ag as E,v as F,q as C,ah as G,a6 as k,a0 as H,o as u,V as K,t as a,a as s,w as S,N as $,m as B,c as _,e as L,P as O,O as U,p as j,a7 as J,f as q,a8 as W}from"./index-R8dLcqG_.js";import{u as X}from"./search-ByVbj6Ls.js";import"./more-vert-zjmMMiPD.js";import"./EditValueModal-O1aAFYgx.js";import"./vee-validate.esm-vpr6zxQb.js";const Y={class:"nav"},Z={class:"title"},ee={key:0,class:"count"},te=["onClick"],ae={class:"title"},se={key:0,class:"count"},_e=A({__name:"CallsSidebar",setup(oe){const m=M(),{counter:p}=Q(R()),{parseQ:w}=X(),o=z({tagIds:[]}),n=d(""),l=d(""),c=d(new Map),{fetch:f}=D({handle:e=>{e&&(p.value.calls=e.total,c.value.set("1",e.incoming),c.value.set("2",e.outgoing),c.value.set("3",e.missed))},document:G,variables:()=>({}),appApi:!0});function v(e){return c.value.get(e)??-1}function g(){var i;const e=k.currentRoute.value,r=H(((i=e.query.q)==null?void 0:i.toString())??"");w(o,r),n.value=o.type??"",l.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(l.value=""),f()}g(),P(()=>k.currentRoute.value,()=>{g()});function T(e){const r=J([{name:"type",op:"",value:e}]);q(m,`/calls?q=${W(r)}`)}function b(){q(m,"/calls")}const y=()=>{f()};return x(()=>{h.on("calls_deleted",y)}),E(()=>{h.off("calls_deleted",y)}),(e,r)=>{const i=V,I=N;return u(),F(I,null,{title:C(()=>[K(a(e.$t("page_title.calls")),1)]),body:C(()=>[s("ul",Y,[s("li",{onClick:S(b,["prevent"]),class:$({active:!l.value&&!n.value})},[s("span",Z,a(e.$t("all")),1),B(p).calls>=0?(u(),_("span",ee,a(B(p).calls.toLocaleString()),1)):L("",!0)],2),(u(),_(U,null,O(["1","2","3"],t=>s("li",{key:t,onClick:S(ne=>T(t),["prevent"]),class:$({active:t===n.value})},[s("span",ae,a(e.$t(`call_type.${t}`)),1),v(t)>=0?(u(),_("span",se,a(v(t).toLocaleString()),1)):L("",!0)],10,te)),64))]),j(i,{type:"CALL",selected:l.value},null,8,["selected"])]),_:1})}}});export{_e as default};

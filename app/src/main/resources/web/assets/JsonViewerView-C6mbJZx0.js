import{bI as n,d as j,h as u,aX as k,a1 as f,aY as $,o as c,c as x,a as o,p as y,N as V,s as N,u as T,k as S,t as h,w as g,m as E,z as D,v as C,e as w,O as R,H}from"./index-Dn0O6zoH.js";import{_ as O}from"./MonacoEditor.vuevuetypescriptsetuptruelang-DhAxQ-me.js";const A=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,B={name:"JsonString",props:{jsonValue:{type:String,required:!0}},data(){return{expand:!0,canExtend:!1}},mounted(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle(){this.expand=!this.expand}},render(){let e=this.jsonValue;const t=A.test(e);let s;return this.expand?(s={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},t?(e=`<a href="${e}" target="_blank" class="jv-link">${e}</a>`,s.innerHTML=`"${e.toString()}"`):s.innerText=`"${e.toString()}"`):s={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},n("span",{},[this.canExtend&&n("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),n("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),n("span",s)])}},z={props:{jsonValue:{type:Object,default:null}},setup(e){return()=>n("span",{class:{"jv-item":!0,"jv-undefined":!0},innerText:e.jsonValue===null?"null":"undefined"})}},q={props:{jsonValue:{type:Number,required:!0}},setup(e){const t=Number.isInteger(e.jsonValue);return()=>n("span",{class:{"jv-item":!0,"jv-number":!0,"jv-number-integer":t,"jv-number-float":!t},innerText:e.jsonValue.toString()})}},I={props:{jsonValue:Boolean},setup(e){return()=>n("span",{class:{"jv-item":!0,"jv-boolean":!0},innerText:e.jsonValue.toString()})}},J={name:"JsonObject",props:{jsonValue:{type:Object,required:!0},expandDepth:{type:Number,default:1},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean},data(){return{value:{}}},computed:{ordered(){const e={};return Object.keys(this.value).sort().forEach(t=>{e[t]=this.value[t]}),e}},watch:{jsonValue(e){this.setValue(e)}},mounted(){this.setValue(this.jsonValue)},methods:{setValue(e){setTimeout(()=>{this.value=e},0)},toggle(){this.$emit("update:expand",!this.expand),this.dispatchEvent()},dispatchEvent(){try{this.$el.dispatchEvent(new Event("resized"))}catch{}}},render(){const e=[];this.keyName||e.push(n("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),e.push(n("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"{"}));const t=Object.keys(this.value).length;if(t>0&&e.push(n("span",{class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:t===1?"1 prop":`${t} props`})),this.expand){for(const s in this.ordered)if(this.ordered.hasOwnProperty(s)){const a=this.ordered[s];e.push(n(m,{key:s,style:{display:this.expand?void 0:"none"},keyName:s,expandDepth:this.expandDepth,depth:this.depth+1,value:a}))}}return e.push(n("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"}"})),n("span",e)}},L={name:"JsonArray",props:{jsonValue:{type:Array,required:!0},expandDepth:{type:Number,default:1},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean},data(){return{value:[]}},watch:{jsonValue(e){this.setValue(e)}},mounted(){this.setValue(this.jsonValue)},methods:{setValue(e,t=0){t===0&&(this.value=[]),setTimeout(()=>{e.length>t&&(this.value.push(e[t]),this.setValue(e,t+1))},0)},toggle(){this.$emit("update:expand",!this.expand);try{this.$el.dispatchEvent(new Event("resized"))}catch{}}},render(){const e=[];this.keyName||e.push(n("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),e.push(n("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"["}));const t=this.value.length;return t>0&&e.push(n("span",{class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:t==1?"1 item":`${t} items`})),this.expand&&this.value.forEach((s,a)=>{e.push(n(m,{key:a,style:{display:this.expand?void 0:"none"},expandDepth:this.expandDepth,depth:this.depth+1,value:s}))}),e.push(n("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"]"})),n("span",e)}},M={props:{jsonValue:{type:Function,required:!0}},setup(e){return()=>n("span",{class:{"jv-item":!0,"jv-function":!0},attrs:{title:e.jsonValue.toString()},innerHTML:"&lt;function&gt;"})}},P={props:{jsonValue:{type:Date,required:!0}},setup(e){const t=e.jsonValue;return()=>n("span",{class:{"jv-item":!0,"jv-string":!0},innerText:`"${t.toLocaleString()}"`})}},F=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Z={name:"JsonString",props:{jsonValue:{type:RegExp,required:!0}},data(){return{expand:!0,canExtend:!1}},mounted(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle(){this.expand=!this.expand}},render(){let e=this.jsonValue;const t=F.test(e);let s;return this.expand?(s={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},t?(e=`<a href="${e}" target="_blank" class="jv-link">${e}</a>`,s.innerHTML=`${e.toString()}`):s.innerText=`${e.toString()}`):s={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},n("span",{},[this.canExtend&&n("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),n("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),n("span",s)])}},m={name:"JsonBox",props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},expandDepth:{type:Number,default:1},keyName:{type:String,default:""},depth:{type:Number,default:0}},data(){return{expand:!0}},mounted(){this.expand=!(this.depth>=this.expandDepth)},methods:{toggle(){this.expand=!this.expand;try{this.$el.dispatchEvent(new Event("resized"))}catch{}}},render(){let e;this.value===null||this.value===void 0?e=z:Array.isArray(this.value)?e=L:Object.prototype.toString.call(this.value)==="[object Date]"?e=P:typeof this.value=="object"?e=J:typeof this.value=="number"?e=q:typeof this.value=="string"?e=B:typeof this.value=="boolean"?e=I:typeof this.value=="function"&&(e=M),this.value&&this.value.constructor===RegExp&&(e=Z);let t=!1;if(this.keyName&&this.value){if(Array.isArray(this.value)&&this.value.length)t=!0;else if(typeof this.value=="object"){const a=Object.prototype.toString.call(this.value);!["[]","[object Date]"].includes(a)&&Object.keys(this.value).length&&(t=!0)}}const s=[];return t&&s.push(n("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle})),this.keyName&&s.push(n("span",{class:{"jv-key":!0},onClick:()=>{console.log(this.keyName)},innerText:`${this.keyName}:`})),s.push(n(e,{class:{"jv-push":!0},jsonValue:this.value,keyName:this.keyName,depth:this.depth,expand:this.expand,expandDepth:this.expandDepth,"onUpdate:expand":a=>{this.expand=a}})),n("div",{class:{"jv-node":!0,"jv-key-node":!!this.keyName&&!t,toggle:t}},s)}},K={class:"jv-code"},U=j({__name:"json-viewer",props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expandDepth:{type:Number,default:1}},setup(e){const t=u("light"),s=()=>{t.value=document.documentElement.classList[0]==="dark"?"dark":"light"};return k(()=>{f.on("color_mode_changed",s)}),$(()=>{f.off("color_mode_changed",s)}),(a,p)=>{const l=m;return c(),x("div",{class:V(["jv-container",t.value])},[o("div",K,[y(l,{value:e.value,"expand-depth":e.expandDepth},null,8,["value","expand-depth"])])],2)}}}),G={class:"top-app-bar"},X={class:"title"},Y={class:"actions"},Q={class:"scroll-content"},W=j({__name:"JsonViewerView",setup(e){const{json:t}=N(T()),s=u(null),a=u(1),p=u(1),l=()=>{try{const i=JSON.parse(t.value);s.value=i}catch(i){console.error(i)}};S(t,l),l();function v(i){i?a.value=1e3:a.value=1,p.value++}return(i,r)=>{const _=O,b=U;return c(),x(R,null,[o("div",G,[o("div",X,h(i.$t("json_viewer")),1),o("div",Y,[o("md-outlined-button",{class:"btn-sm",onClick:r[0]||(r[0]=g(d=>v(!0),["prevent"]))},h(i.$t("expand_all")),1),o("md-outlined-button",{class:"btn-sm",onClick:r[1]||(r[1]=g(d=>v(!1),["prevent"]))},h(i.$t("collapse_all")),1)])]),o("div",Q,[y(_,{language:"json",modelValue:E(t),"onUpdate:modelValue":r[2]||(r[2]=d=>D(t)?t.value=d:null)},null,8,["modelValue"]),s.value?(c(),C(b,{value:s.value,"expand-depth":a.value,key:p.value},null,8,["value","expand-depth"])):w("",!0)])],64)}}}),se=H(W,[["__scopeId","data-v-2e70676d"]]);export{se as default};

import{o as n,c as a,a as o,d as te,g as se,h as b,s as ne,i as ae,K as oe,u as ie,j as A,C as $,l as ce,L as le,M as de,m as c,w as _,t as q,e as x,x as l,V as _e,p as d,Q as re,cP as ue,cM as pe,b9 as ve,cQ as me,a4 as ye,S as be,U as he,W as fe,F as ke,G as ge,Y as Te,f as Q,Z as we,$ as Ce,a1 as h,a2 as $e,cR as qe,H as xe}from"./index-R8dLcqG_.js";import{_ as Fe}from"./print-outline-rounded-wkAfaGzM.js";import{a as Le,_ as Ee}from"./add-notes-outline-rounded-CJxyoeFp.js";import{u as Me}from"./markdown-C_We2h-B.js";import{u as De}from"./feeds-bp5iUXJ_.js";const Se={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ne=o("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h14v-6q0-.425.288-.712T20 12t.713.288T21 13v6q0 .825-.587 1.413T19 21zM19 6.4L10.4 15q-.275.275-.7.275T9 15t-.275-.7t.275-.7L17.6 5H15q-.425 0-.712-.288T14 4t.288-.712T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10t-.712-.288T19 9z"},null,-1),Ve=[Ne];function Ae(u,v){return n(),a("svg",Se,[...Ve])}const Qe={name:"material-symbols-open-in-new-rounded",render:Ae},r=u=>(ke("data-v-8cca54ab"),u=u(),ge(),u),He={class:"content"},Ge={key:0},Ie=Te('<div class="top-app-bar" data-v-8cca54ab><div class="title" data-v-8cca54ab><div class="skeleton-text skeleton-app-bar" data-v-8cca54ab></div></div><div class="actions" data-v-8cca54ab><div class="skeleton-image skeleton-icon" data-v-8cca54ab></div></div></div><div class="article-title" data-v-8cca54ab><div class="skeleton-text skeleton-title" data-v-8cca54ab></div></div><div class="md-container" data-v-8cca54ab><div class="skeleton-text skeleton-content" style="width:100%;" data-v-8cca54ab></div><div class="skeleton-text skeleton-content" style="width:90%;" data-v-8cca54ab></div><div class="skeleton-text skeleton-content" style="width:75%;" data-v-8cca54ab></div><div class="skeleton-text skeleton-content" style="width:85%;" data-v-8cca54ab></div><div class="skeleton-text skeleton-content" style="width:60%;" data-v-8cca54ab></div><div class="skeleton-text skeleton-content" style="width:80%;" data-v-8cca54ab></div><div class="skeleton-text skeleton-content" style="width:70%;" data-v-8cca54ab></div><div class="skeleton-text skeleton-content" style="width:65%;" data-v-8cca54ab></div></div>',3),ze=[Ie],Be={key:1},Re={class:"top-app-bar"},Ue={class:"title"},Ke={key:1},Pe=r(()=>o("md-ripple",null,null,-1)),Ye={key:2,indeterminate:"",class:"spinner-sm"},je=["disabled"],We=r(()=>o("md-ripple",null,null,-1)),Ze=["href"],Je={class:"btn-icon sm"},Oe=r(()=>o("md-ripple",null,null,-1)),Xe=r(()=>o("md-ripple",null,null,-1)),et=r(()=>o("md-ripple",null,null,-1)),tt={class:"actions"},st=r(()=>o("md-ripple",null,null,-1)),nt={class:"article-title"},at=["innerHTML"],p="FEED_ENTRY",ot=te({__name:"FeedEntryView",setup(u){const{t:v}=se(),F=re(),f=b(F.params.id),s=b(),m=b(""),k=b(),{app:H,urlTokenKey:G}=ne(ae()),{render:L}=Me(H,G),{loading:I,fetch:g}=oe({handle:async(e,t)=>{t?$(v(t),"error"):(s.value=e.feedEntry,s.value?m.value=await L(e.feedEntry.content||e.feedEntry.description):m.value="")},document:ue,variables:()=>({id:f.value}),appApi:!0}),T=ie(),{viewFeed:z}=De(T);function B(){const e=F.query.q;e?Q(T,`/feeds?q=${e}`):Q(T,"/feeds")}const{mutate:R,loading:it,onDone:U}=A({document:pe,appApi:!0});U(()=>{$(v("saved"))}),ce({handle:(e,t)=>{t?$(v(t),"error"):e&&(k.value=e.tags)},document:ve,variables:{type:p},appApi:!0});const K=()=>{window.print()};function P(){var e,t;we(Ce,{type:p,tags:k.value,item:{key:(e=s.value)==null?void 0:e.id,title:"",size:0},selected:(t=k.value)==null?void 0:t.filter(w=>{var y;return(y=s.value)==null?void 0:y.tags.some(C=>C.id===w.id)})})}const{mutate:Y,loading:E,onDone:j}=A({document:me,appApi:!0});j(async e=>{const t=e.data;s.value=t.syncFeedContent,m.value=await L(t.syncFeedContent.content||t.syncFeedContent.description)});const W=()=>{Y({id:f.value})},M=e=>{e.type===p&&g()},D=e=>{e.type===p&&g()};return le(()=>{h.on("item_tags_updated",D),h.on("items_tags_updated",M),g()}),de(()=>{h.off("item_tags_updated",D),h.off("items_tags_updated",M)}),(e,t)=>{var S,N,V;const w=ye,y=$e,C=Le,Z=Qe,J=Ee,O=Fe,X=qe,i=be("tooltip");return n(),a("div",He,[c(I)&&!s.value?(n(),a("article",Ge,ze)):s.value?(n(),a("article",Be,[o("div",Re,[o("div",Ue,[s.value.feed?(n(),a("a",{key:0,onClick:t[0]||(t[0]=_(ee=>c(z)(s.value.feed),["stop","prevent"]))},q(s.value.feed.name),1)):x("",!0),s.value?l((n(),a("time",Ke,[_e(q(c(fe)(s.value.publishedAt)),1)])),[[i,c(he)(s.value.publishedAt)]]):x("",!0),d(w,{tags:(S=s.value)==null?void 0:S.tags,type:p},null,8,["tags"]),l((n(),a("button",{class:"btn-icon sm",onClick:_(P,["prevent"]),style:{"margin-inline-start":"16px"}},[Pe,d(y)])),[[i,e.$t("add_to_tags")]]),c(E)?(n(),a("md-circular-progress",Ye)):l((n(),a("button",{key:3,class:"btn-icon sm",disabled:c(E),onClick:_(W,["prevent"])},[We,d(C)],8,je)),[[i,e.$t("sync_content")]]),l((n(),a("a",{href:(N=s.value)==null?void 0:N.url,class:"btn-icon",target:"_blank"},[o("button",Je,[Oe,d(Z)])],8,Ze)),[[i,e.$t("view_original_article")]]),l((n(),a("button",{class:"btn-icon sm",onClick:t[1]||(t[1]=_(ee=>c(R)({query:`ids:${f.value}`}),["prevent"]))},[Xe,d(J)])),[[i,e.$t("save_to_notes")]]),l((n(),a("button",{class:"btn-icon sm",onClick:_(K,["prevent"])},[et,d(O)])),[[i,e.$t("print")]])]),o("div",tt,[l((n(),a("button",{class:"btn-icon",onClick:_(B,["prevent"])},[st,d(X)])),[[i,e.$t("close")]])])]),o("div",nt,q((V=s.value)==null?void 0:V.title),1),o("div",{class:"md-container",innerHTML:m.value},null,8,at)])):x("",!0)])}}}),ut=xe(ot,[["__scopeId","data-v-8cca54ab"]]);export{ut as default};

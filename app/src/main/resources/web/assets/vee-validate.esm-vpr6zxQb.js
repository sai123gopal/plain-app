import{aH as j,c9 as O,af as vn,ca as hn,z as Pe,m as w,k as se,cb as Tn,h as Y,I as Fe,aw as ee,cc as kn,cd as Rn,ce as Un,cf as Ne,cg as Bn}from"./index-R8dLcqG_.js";function x(e){return typeof e=="function"}function mn(e){return e==null}const ce=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Xe(e){return Number(e)>=0}function Dn(e){const n=parseFloat(e);return isNaN(n)?e:n}function zn(e){return typeof e=="object"&&e!==null}function xn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function tn(e){if(!zn(e)||xn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Oe(e,n){return Object.keys(n).forEach(r=>{if(tn(n[r])&&tn(e[r])){e[r]||(e[r]={}),Oe(e[r],n[r]);return}e[r]=n[r]}),e}function pe(e){const n=e.split(".");if(!n.length)return"";let r=String(n[0]);for(let l=1;l<n.length;l++){if(Xe(n[l])){r+=`[${n[l]}]`;continue}r+=`.${n[l]}`}return r}const Ln={};function $n(e){return Ln[e]}function ln(e,n,r){typeof r.value=="object"&&(r.value=E(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||n==="__proto__"?Object.defineProperty(e,n,r):e[n]=r.value}function E(e){if(typeof e!="object")return e;var n=0,r,l,u,a=Object.prototype.toString.call(e);if(a==="[object Object]"?u=Object.create(e.__proto__||null):a==="[object Array]"?u=Array(e.length):a==="[object Set]"?(u=new Set,e.forEach(function(h){u.add(E(h))})):a==="[object Map]"?(u=new Map,e.forEach(function(h,v){u.set(E(v),E(h))})):a==="[object Date]"?u=new Date(+e):a==="[object RegExp]"?u=new RegExp(e.source,e.flags):a==="[object DataView]"?u=new e.constructor(E(e.buffer)):a==="[object ArrayBuffer]"?u=e.slice(0):a.slice(-6)==="Array]"&&(u=new e.constructor(e)),u){for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)ln(u,l[n],Object.getOwnPropertyDescriptor(e,l[n]));for(n=0,l=Object.getOwnPropertyNames(e);n<l.length;n++)Object.hasOwnProperty.call(u,r=l[n])&&u[r]===e[r]||ln(u,r,Object.getOwnPropertyDescriptor(e,r))}return u||e}const Je=Symbol("vee-validate-form"),Wn=Symbol("vee-validate-field-instance"),an=Symbol("Default empty value"),qn=typeof window<"u";function He(e){return x(e)&&!!e.__locatorRef}function X(e){return!!e&&x(e.parse)&&e.__type==="VVTypedSchema"}function Ie(e){return!!e&&x(e.validate)}function yn(e){return e==="checkbox"||e==="radio"}function Hn(e){return ce(e)||Array.isArray(e)}function Gn(e){return Array.isArray(e)?e.length===0:ce(e)&&Object.keys(e).length===0}function Me(e){return/^\[.+\]$/i.test(e)}function Kn(e){return gn(e)&&e.multiple}function gn(e){return e.tagName==="SELECT"}function Yn(e){return bn(e)&&e.target&&"submit"in e.target}function bn(e){return e?!!(typeof Event<"u"&&x(Event)&&e instanceof Event||e&&e.srcElement):!1}function B(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,l,u;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(l=r;l--!==0;)if(!B(e[l],n[l]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(l of e.entries())if(!n.has(l[0]))return!1;for(l of e.entries())if(!B(l[1],n.get(l[0])))return!1;return!0}if(un(e)&&un(n))return!(e.size!==n.size||e.name!==n.name||e.lastModified!==n.lastModified||e.type!==n.type);if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(l of e.entries())if(!n.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(l=r;l--!==0;)if(e[l]!==n[l])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();for(u=Object.keys(e),r=u.length,l=r;l--!==0;){var a=u[l];if(!B(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}function un(e){return qn?e instanceof File:!1}function Qe(e){return Me(e)?e.replace(/\[|\]/gi,""):e}function L(e,n,r){return e?Me(n)?e[Qe(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((u,a)=>Hn(u)&&a in u?u[a]:r,e):r}function ie(e,n,r){if(Me(n)){e[Qe(n)]=r;return}const l=n.split(/\.|\[(\d+)\]/).filter(Boolean);let u=e;for(let a=0;a<l.length;a++){if(a===l.length-1){u[l[a]]=r;return}(!(l[a]in u)||mn(u[l[a]]))&&(u[l[a]]=Xe(l[a+1])?[]:{}),u=u[l[a]]}}function We(e,n){if(Array.isArray(e)&&Xe(n)){e.splice(Number(n),1);return}ce(e)&&delete e[n]}function on(e,n){if(Me(n)){delete e[Qe(n)];return}const r=n.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let a=0;a<r.length;a++){if(a===r.length-1){We(l,r[a]);break}if(!(r[a]in l)||mn(l[r[a]]))break;l=l[r[a]]}const u=r.map((a,h)=>L(e,r.slice(0,h).join(".")));for(let a=u.length-1;a>=0;a--)if(Gn(u[a])){if(a===0){We(e,r[0]);continue}We(u[a-1],r[a-1])}}function q(e){return Object.keys(e)}function pn(e,n=void 0){const r=Ne();return(r==null?void 0:r.provides[e])||Un(e,n)}function sn(e,n,r){if(Array.isArray(e)){const l=[...e],u=l.findIndex(a=>B(a,n));return u>=0?l.splice(u,1):l.push(n),l}return B(e,n)?r:n}function cn(e,n=0){let r=null,l=[];return function(...u){return r&&clearTimeout(r),r=setTimeout(()=>{const a=e(...u);l.forEach(h=>h(a)),l=[]},n),new Promise(a=>l.push(a))}}function Xn(e,n){return ce(n)&&n.number?Dn(e):e}function Ge(e,n){let r;return async function(...u){const a=e(...u);r=a;const h=await a;return a!==r?h:(r=void 0,n(h,u))}}function Ke(e){return Array.isArray(e)?e:e?[e]:[]}function Ee(e,n){const r={};for(const l in e)n.includes(l)||(r[l]=e[l]);return r}function Jn(e){let n=null,r=[];return function(...l){const u=ee(()=>{if(n!==u)return;const a=e(...l);r.forEach(h=>h(a)),r=[],n=null});return n=u,new Promise(a=>r.push(a))}}function qe(e){if(Vn(e))return e._value}function Vn(e){return"_value"in e}function Qn(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Ce(e){if(!bn(e))return e;const n=e.target;if(yn(n.type)&&Vn(n))return qe(n);if(n.type==="file"&&n.files){const r=Array.from(n.files);return n.multiple?r:r[0]}if(Kn(n))return Array.from(n.options).filter(r=>r.selected&&!r.disabled).map(qe);if(gn(n)){const r=Array.from(n.options).find(l=>l.selected);return r?qe(r):n.value}return Qn(n)}function On(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ce(e)&&e._$$isNormalized?e:ce(e)?Object.keys(e).reduce((r,l)=>{const u=Zn(e[l]);return e[l]!==!1&&(r[l]=dn(u)),r},n):typeof e!="string"?n:e.split("|").reduce((r,l)=>{const u=er(l);return u.name&&(r[u.name]=dn(u.params)),r},n):n}function Zn(e){return e===!0?[]:Array.isArray(e)||ce(e)?e:[e]}function dn(e){const n=r=>typeof r=="string"&&r[0]==="@"?nr(r.slice(1)):r;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((r,l)=>(r[l]=n(e[l]),r),{})}const er=e=>{let n=[];const r=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:r,params:n}};function nr(e){const n=r=>L(r,e)||r[e];return n.__locatorRef=e,n}function rr(e){return Array.isArray(e)?e.filter(He):q(e).filter(n=>He(e[n])).map(n=>e[n])}const tr={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let ir=Object.assign({},tr);const Ve=()=>ir;async function _n(e,n,r={}){const l=r==null?void 0:r.bails,u={name:(r==null?void 0:r.name)||"{field}",rules:n,label:r==null?void 0:r.label,bails:l??!0,formData:(r==null?void 0:r.values)||{}},a=await lr(u,e);return Object.assign(Object.assign({},a),{valid:!a.errors.length})}async function lr(e,n){const r=e.rules;if(X(r)||Ie(r))return ur(n,Object.assign(Object.assign({},e),{rules:r}));if(x(r)||Array.isArray(r)){const v={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:n},c=Array.isArray(r)?r:[r],s=c.length,S=[];for(let p=0;p<s;p++){const F=c[p],g=await F(n,v);if(!(typeof g!="string"&&!Array.isArray(g)&&g)){if(Array.isArray(g))S.push(...g);else{const J=typeof g=="string"?g:An(v);S.push(J)}if(e.bails)return{errors:S}}}return{errors:S}}const l=Object.assign(Object.assign({},e),{rules:On(r)}),u=[],a=Object.keys(l.rules),h=a.length;for(let v=0;v<h;v++){const c=a[v],s=await or(l,n,{name:c,params:l.rules[c]});if(s.error&&(u.push(s.error),e.bails))return{errors:u}}return{errors:u}}function ar(e){return!!e&&e.name==="ValidationError"}function Sn(e){return{__type:"VVTypedSchema",async parse(r,l){var u;try{return{output:await e.validate(r,{abortEarly:!1,context:(l==null?void 0:l.formData)||{}}),errors:[]}}catch(a){if(!ar(a))throw a;if(!(!((u=a.inner)===null||u===void 0)&&u.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const h=a.inner.reduce((v,c)=>{const s=c.path||"";return v[s]||(v[s]={errors:[],path:s}),v[s].errors.push(...c.errors),v},{});return{errors:Object.values(h)}}}}}async function ur(e,n){const l=await(X(n.rules)?n.rules:Sn(n.rules)).parse(e,{formData:n.formData}),u=[];for(const a of l.errors)a.errors.length&&u.push(...a.errors);return{value:l.value,errors:u}}async function or(e,n,r){const l=$n(r.name);if(!l)throw new Error(`No such validator '${r.name}' exists.`);const u=sr(r.params,e.formData),a={field:e.label||e.name,name:e.name,label:e.label,value:n,form:e.formData,rule:Object.assign(Object.assign({},r),{params:u})},h=await l(n,u,a);return typeof h=="string"?{error:h}:{error:h?void 0:An(a)}}function An(e){const n=Ve().generateMessage;return n?n(e):"Field is invalid"}function sr(e,n){const r=l=>He(l)?l(n):l;return Array.isArray(e)?e.map(r):Object.keys(e).reduce((l,u)=>(l[u]=r(e[u]),l),{})}async function cr(e,n){const l=await(X(e)?e:Sn(e)).parse(E(n)),u={},a={};for(const h of l.errors){const v=h.errors,c=(h.path||"").replace(/\["(\d+)"\]/g,(s,S)=>`[${S}]`);u[c]={valid:!v.length,errors:v},v.length&&(a[c]=v[0])}return{valid:!l.errors.length,results:u,errors:a,values:l.value,source:"schema"}}async function dr(e,n,r){const u=q(e).map(async s=>{var S,p,F;const g=(S=r==null?void 0:r.names)===null||S===void 0?void 0:S[s],M=await _n(L(n,s),e[s],{name:(g==null?void 0:g.name)||s,label:g==null?void 0:g.label,values:n,bails:(F=(p=r==null?void 0:r.bailsMap)===null||p===void 0?void 0:p[s])!==null&&F!==void 0?F:!0});return Object.assign(Object.assign({},M),{path:s})});let a=!0;const h=await Promise.all(u),v={},c={};for(const s of h)v[s.path]={valid:s.valid,errors:s.errors},s.valid||(a=!1,c[s.path]=s.errors[0]);return{valid:a,results:v,errors:c,source:"schema"}}let fn=0;function fr(e,n){const{value:r,initialValue:l,setInitialValue:u}=vr(e,n.modelValue,n.form);if(!n.form){let c=function(g){var M;"value"in g&&(r.value=g.value),"errors"in g&&S(g.errors),"touched"in g&&(F.touched=(M=g.touched)!==null&&M!==void 0?M:F.touched),"initialValue"in g&&u(g.initialValue)};const{errors:s,setErrors:S}=yr(),p=fn>=Number.MAX_SAFE_INTEGER?0:++fn,F=mr(r,l,s,n.schema);return{id:p,path:e,value:r,initialValue:l,meta:F,flags:{pendingUnmount:{[p]:!1},pendingReset:!1},errors:s,setState:c}}const a=n.form.createPathState(e,{bails:n.bails,label:n.label,type:n.type,validate:n.validate,schema:n.schema}),h=j(()=>a.errors);function v(c){var s,S,p;"value"in c&&(r.value=c.value),"errors"in c&&((s=n.form)===null||s===void 0||s.setFieldError(w(e),c.errors)),"touched"in c&&((S=n.form)===null||S===void 0||S.setFieldTouched(w(e),(p=c.touched)!==null&&p!==void 0?p:!1)),"initialValue"in c&&u(c.initialValue)}return{id:Array.isArray(a.id)?a.id[a.id.length-1]:a.id,path:e,value:r,errors:h,meta:a,initialValue:l,flags:a.__flags,setState:v}}function vr(e,n,r){const l=Y(w(n));function u(){return r?L(r.initialValues.value,w(e),w(l)):w(l)}function a(s){if(!r){l.value=s;return}r.setFieldInitialValue(w(e),s,!0)}const h=j(u);if(!r)return{value:Y(u()),initialValue:h,setInitialValue:a};const v=hr(n,r,h,e);return r.stageInitialValue(w(e),v,!0),{value:j({get(){return L(r.values,w(e))},set(s){r.setFieldValue(w(e),s,!1)}}),initialValue:h,setInitialValue:a}}function hr(e,n,r,l){return Pe(e)?w(e):e!==void 0?e:L(n.values,w(l),w(r))}function mr(e,n,r,l){const u=j(()=>{var h,v,c;return(c=(v=(h=O(l))===null||h===void 0?void 0:h.describe)===null||v===void 0?void 0:v.call(h).required)!==null&&c!==void 0?c:!1}),a=Fe({touched:!1,pending:!1,valid:!0,required:u,validated:!!w(r).length,initialValue:j(()=>w(n)),dirty:j(()=>!B(w(e),w(n)))});return se(r,h=>{a.valid=!h.length},{immediate:!0,flush:"sync"}),a}function yr(){const e=Y([]);return{errors:e,setErrors:n=>{e.value=Ke(n)}}}function jr(e,n,r){return yn(r==null?void 0:r.type)?br(e,n,r):jn(e,n,r)}function jn(e,n,r){const{initialValue:l,validateOnMount:u,bails:a,type:h,checkedValue:v,label:c,validateOnValueUpdate:s,uncheckedValue:S,controlled:p,keepValueOnUnmount:F,syncVModel:g,form:M}=gr(r),J=p?pn(Je):void 0,_=M||J,Q=j(()=>pe(O(e))),$=j(()=>{if(O(_==null?void 0:_.schema))return;const V=w(n);return Ie(V)||X(V)||x(V)||Array.isArray(V)?V:On(V)}),_e=!x($.value)&&X(O(n)),{id:me,value:Z,initialValue:le,meta:D,setState:de,errors:ye,flags:U}=fr(Q,{modelValue:l,form:_,bails:a,label:c,type:h,validate:$.value?T:void 0,schema:_e?n:void 0}),fe=j(()=>ye.value[0]);g&&pr({value:Z,prop:g,handleChange:Ae,shouldValidate:()=>s&&!U.pendingReset});const Te=(f,V=!1)=>{D.touched=!0,V&&ne()};async function Se(f){var V,N;if(_!=null&&_.validateSchema){const{results:A}=await _.validateSchema(f);return(V=A[O(Q)])!==null&&V!==void 0?V:{valid:!0,errors:[]}}return $.value?_n(Z.value,$.value,{name:O(Q),label:O(c),values:(N=_==null?void 0:_.values)!==null&&N!==void 0?N:{},bails:a}):{valid:!0,errors:[]}}const ne=Ge(async()=>(D.pending=!0,D.validated=!0,Se("validated-only")),f=>(U.pendingUnmount[W.id]||(de({errors:f.errors}),D.pending=!1,D.valid=f.valid),f)),H=Ge(async()=>Se("silent"),f=>(D.valid=f.valid,f));function T(f){return(f==null?void 0:f.mode)==="silent"?H():ne()}function Ae(f,V=!0){const N=Ce(f);ve(N,V)}vn(()=>{if(u)return ne();(!_||!_.validateSchema)&&H()});function ae(f){D.touched=f}function ue(f){var V;const N=f&&"value"in f?f.value:le.value;de({value:E(N),initialValue:E(N),touched:(V=f==null?void 0:f.touched)!==null&&V!==void 0?V:!1,errors:(f==null?void 0:f.errors)||[]}),D.pending=!1,D.validated=!1,H()}const je=Ne();function ve(f,V=!0){Z.value=je&&g?Xn(f,je.props.modelModifiers):f,(V?ne:H)()}function Ze(f){de({errors:Array.isArray(f)?f:[f]})}const ge=j({get(){return Z.value},set(f){ve(f,s)}}),W={id:me,name:Q,label:c,value:ge,meta:D,errors:ye,errorMessage:fe,type:h,checkedValue:v,uncheckedValue:S,bails:a,keepValueOnUnmount:F,resetField:ue,handleReset:()=>ue(),validate:T,handleChange:Ae,handleBlur:Te,setState:de,setTouched:ae,setErrors:Ze,setValue:ve};if(hn(Wn,W),Pe(n)&&typeof w(n)!="function"&&se(n,(f,V)=>{B(f,V)||(D.validated?ne():H())},{deep:!0}),!_)return W;const ke=j(()=>{const f=$.value;return!f||x(f)||Ie(f)||X(f)||Array.isArray(f)?{}:Object.keys(f).reduce((V,N)=>{const A=rr(f[N]).map(re=>re.__locatorRef).reduce((re,K)=>{const te=L(_.values,K)||_.values[K];return te!==void 0&&(re[K]=te),re},{});return Object.assign(V,A),V},{})});return se(ke,(f,V)=>{if(!Object.keys(f).length)return;!B(f,V)&&(D.validated?ne():H())}),Tn(()=>{var f;const V=(f=O(W.keepValueOnUnmount))!==null&&f!==void 0?f:O(_.keepValuesOnUnmount),N=O(Q);if(V||!_||U.pendingUnmount[W.id]){_==null||_.removePathState(N,me);return}U.pendingUnmount[W.id]=!0;const A=_.getPathState(N);if(Array.isArray(A==null?void 0:A.id)&&(A!=null&&A.multiple)?A!=null&&A.id.includes(W.id):(A==null?void 0:A.id)===W.id){if(A!=null&&A.multiple&&Array.isArray(A.value)){const K=A.value.findIndex(te=>B(te,O(W.checkedValue)));if(K>-1){const te=[...A.value];te.splice(K,1),_.setFieldValue(N,te)}Array.isArray(A.id)&&A.id.splice(A.id.indexOf(W.id),1)}else _.unsetPathValue(O(Q));_.removePathState(N,me)}}),W}function gr(e){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),r=!!(e!=null&&e.syncVModel),l=typeof(e==null?void 0:e.syncVModel)=="string"?e.syncVModel:(e==null?void 0:e.modelPropName)||"modelValue",u=r&&!("initialValue"in(e||{}))?Ye(Ne(),l):e==null?void 0:e.initialValue;if(!e)return Object.assign(Object.assign({},n()),{initialValue:u});const a="valueProp"in e?e.valueProp:e.checkedValue,h="standalone"in e?!e.standalone:e.controlled,v=(e==null?void 0:e.modelPropName)||(e==null?void 0:e.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},n()),e||{}),{initialValue:u,controlled:h??!0,checkedValue:a,syncVModel:v})}function br(e,n,r){const l=r!=null&&r.standalone?void 0:pn(Je),u=r==null?void 0:r.checkedValue,a=r==null?void 0:r.uncheckedValue;function h(v){const c=v.handleChange,s=j(()=>{const p=O(v.value),F=O(u);return Array.isArray(p)?p.findIndex(g=>B(g,F))>=0:B(F,p)});function S(p,F=!0){var g,M;if(s.value===((g=p==null?void 0:p.target)===null||g===void 0?void 0:g.checked)){F&&v.validate();return}const J=O(e),_=l==null?void 0:l.getPathState(J),Q=Ce(p);let $=(M=O(u))!==null&&M!==void 0?M:Q;l&&(_!=null&&_.multiple)&&_.type==="checkbox"?$=sn(L(l.values,J)||[],$,void 0):(r==null?void 0:r.type)==="checkbox"&&($=sn(O(v.value),$,O(a))),c($,F)}return Object.assign(Object.assign({},v),{checked:s,checkedValue:u,uncheckedValue:a,handleChange:S})}return h(jn(e,n,r))}function pr({prop:e,value:n,handleChange:r,shouldValidate:l}){const u=Ne();if(!u||!e)return;const a=typeof e=="string"?e:"modelValue",h=`update:${a}`;a in u.props&&(se(n,v=>{B(v,Ye(u,a))||u.emit(h,v)}),se(()=>Ye(u,a),v=>{if(v===an&&n.value===void 0)return;const c=v===an?void 0:v;B(c,n.value)||r(c,l())}))}function Ye(e,n){if(e)return e.props[n]}let Vr=0;const we=["bails","fieldsCount","id","multiple","type","validate"];function En(e){const n=(e==null?void 0:e.initialValues)||{},r=Object.assign({},O(n)),l=w(e==null?void 0:e.validationSchema);return l&&X(l)&&x(l.cast)?E(l.cast(r)||{}):E(r)}function Er(e){var n;const r=Vr++;let l=0;const u=Y(!1),a=Y(!1),h=Y(0),v=[],c=Fe(En(e)),s=Y([]),S=Y({}),p=Y({}),F=Jn(()=>{p.value=s.value.reduce((i,t)=>(i[pe(O(t.path))]=t,i),{})});function g(i,t){const o=T(i);if(!o){typeof i=="string"&&(S.value[pe(i)]=Ke(t));return}if(typeof i=="string"){const d=pe(i);S.value[d]&&delete S.value[d]}o.errors=Ke(t),o.valid=!o.errors.length}function M(i){q(i).forEach(t=>{g(t,i[t])})}e!=null&&e.initialErrors&&M(e.initialErrors);const J=j(()=>{const i=s.value.reduce((t,o)=>(o.errors.length&&(t[o.path]=o.errors),t),{});return Object.assign(Object.assign({},S.value),i)}),_=j(()=>q(J.value).reduce((i,t)=>{const o=J.value[t];return o!=null&&o.length&&(i[t]=o[0]),i},{})),Q=j(()=>s.value.reduce((i,t)=>(i[t.path]={name:t.path||"",label:t.label||""},i),{})),$=j(()=>s.value.reduce((i,t)=>{var o;return i[t.path]=(o=t.bails)!==null&&o!==void 0?o:!0,i},{})),_e=Object.assign({},(e==null?void 0:e.initialErrors)||{}),me=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:Z,originalInitialValues:le,setInitialValues:D}=_r(s,c,e),de=Or(s,c,le,_),ye=j(()=>s.value.reduce((i,t)=>{const o=L(c,t.path);return ie(i,t.path,o),i},{})),U=e==null?void 0:e.validationSchema;function fe(i,t){var o,d;const y=j(()=>L(Z.value,O(i))),b=p.value[O(i)],m=(t==null?void 0:t.type)==="checkbox"||(t==null?void 0:t.type)==="radio";if(b&&m){b.multiple=!0;const G=l++;return Array.isArray(b.id)?b.id.push(G):b.id=[b.id,G],b.fieldsCount++,b.__flags.pendingUnmount[G]=!1,b}const I=j(()=>L(c,O(i))),C=O(i),k=ae.findIndex(G=>G===C);k!==-1&&ae.splice(k,1);const P=j(()=>{var G,be,ze,xe;const Le=O(U);if(X(Le))return(be=(G=Le.describe)===null||G===void 0?void 0:G.call(Le,O(i)).required)!==null&&be!==void 0?be:!1;const $e=O(t==null?void 0:t.schema);return X($e)&&(xe=(ze=$e.describe)===null||ze===void 0?void 0:ze.call($e).required)!==null&&xe!==void 0?xe:!1}),R=l++,z=Fe({id:R,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((o=_e[C])===null||o===void 0)&&o.length),required:P,initialValue:y,errors:Bn([]),bails:(d=t==null?void 0:t.bails)!==null&&d!==void 0?d:!1,label:t==null?void 0:t.label,type:(t==null?void 0:t.type)||"default",value:I,multiple:!1,__flags:{pendingUnmount:{[R]:!1},pendingReset:!1},fieldsCount:1,validate:t==null?void 0:t.validate,dirty:j(()=>!B(w(I),w(y)))});return s.value.push(z),p.value[C]=z,F(),_.value[C]&&!_e[C]&&ee(()=>{oe(C,{mode:"silent"})}),Pe(i)&&se(i,G=>{F();const be=E(I.value);p.value[G]=z,ee(()=>{ie(c,G,be)})}),z}const Te=cn(rn,5),Se=cn(rn,5),ne=Ge(async i=>await(i==="silent"?Te():Se()),(i,[t])=>{const o=q(f.errorBag.value),y=[...new Set([...q(i.results),...s.value.map(b=>b.path),...o])].sort().reduce((b,m)=>{var I;const C=m,k=T(C)||Ae(C),P=((I=i.results[C])===null||I===void 0?void 0:I.errors)||[],R=O(k==null?void 0:k.path)||C,z=Sr({errors:P,valid:!P.length},b.results[R]);return b.results[R]=z,z.valid||(b.errors[R]=z.errors[0]),k&&S.value[R]&&delete S.value[R],k?(k.valid=z.valid,t==="silent"||t==="validated-only"&&!k.validated||g(k,z.errors),b):(g(R,P),b)},{valid:i.valid,results:{},errors:{},source:i.source});return i.values&&(y.values=i.values,y.source=i.source),q(y.results).forEach(b=>{var m;const I=T(b);I&&t!=="silent"&&(t==="validated-only"&&!I.validated||g(I,(m=y.results[b])===null||m===void 0?void 0:m.errors))}),y});function H(i){s.value.forEach(i)}function T(i){const t=typeof i=="string"?pe(i):i;return typeof t=="string"?p.value[t]:t}function Ae(i){return s.value.filter(o=>i.startsWith(o.path)).reduce((o,d)=>o?d.path.length>o.path.length?d:o:d,void 0)}let ae=[],ue;function je(i){return ae.push(i),ue||(ue=ee(()=>{[...ae].sort().reverse().forEach(o=>{on(c,o)}),ae=[],ue=null})),ue}function ve(i){return function(o,d){return function(b){return b instanceof Event&&(b.preventDefault(),b.stopPropagation()),H(m=>m.touched=!0),u.value=!0,h.value++,he().then(m=>{const I=E(c);if(m.valid&&typeof o=="function"){const C=E(ye.value);let k=i?C:I;return m.values&&(k=m.source==="schema"?m.values:Object.assign({},k,m.values)),o(k,{evt:b,controlledValues:C,setErrors:M,setFieldError:g,setTouched:Re,setFieldTouched:K,setValues:A,setFieldValue:V,resetForm:Ue,resetField:en})}!m.valid&&typeof d=="function"&&d({values:I,evt:b,errors:m.errors,results:m.results})}).then(m=>(u.value=!1,m),m=>{throw u.value=!1,m})}}}const ge=ve(!1);ge.withControlled=ve(!0);function W(i,t){const o=s.value.findIndex(y=>y.path===i&&(Array.isArray(y.id)?y.id.includes(t):y.id===t)),d=s.value[o];if(!(o===-1||!d)){if(ee(()=>{oe(i,{mode:"silent",warn:!1})}),d.multiple&&d.fieldsCount&&d.fieldsCount--,Array.isArray(d.id)){const y=d.id.indexOf(t);y>=0&&d.id.splice(y,1),delete d.__flags.pendingUnmount[t]}(!d.multiple||d.fieldsCount<=0)&&(s.value.splice(o,1),nn(i),F(),delete p.value[i])}}function ke(i){q(p.value).forEach(t=>{t.startsWith(i)&&delete p.value[t]}),s.value=s.value.filter(t=>!t.path.startsWith(i)),ee(()=>{F()})}const f={formId:r,values:c,controlledValues:ye,errorBag:J,errors:_,schema:U,submitCount:h,meta:de,isSubmitting:u,isValidating:a,fieldArrays:v,keepValuesOnUnmount:me,validateSchema:w(U)?ne:void 0,validate:he,setFieldError:g,validateField:oe,setFieldValue:V,setValues:A,setErrors:M,setFieldTouched:K,setTouched:Re,resetForm:Ue,resetField:en,handleSubmit:ge,useFieldModel:Cn,defineInputBinds:Nn,defineComponentBinds:Mn,defineField:De,stageInitialValue:Fn,unsetInitialValue:nn,setFieldInitialValue:Be,createPathState:fe,getPathState:T,unsetPathValue:je,removePathState:W,initialValues:Z,getAllPathStates:()=>s.value,destroyPath:ke,isFieldTouched:te,isFieldDirty:wn,isFieldValid:Pn};function V(i,t,o=!0){const d=E(t),y=typeof i=="string"?i:i.path;T(y)||fe(y),ie(c,y,d),o&&oe(y)}function N(i,t=!0){q(c).forEach(o=>{delete c[o]}),q(i).forEach(o=>{V(o,i[o],!1)}),t&&he()}function A(i,t=!0){Oe(c,i),v.forEach(o=>o&&o.reset()),t&&he()}function re(i,t){const o=T(O(i))||fe(i);return j({get(){return o.value},set(d){var y;const b=O(i);V(b,d,(y=O(t))!==null&&y!==void 0?y:!1)}})}function K(i,t){const o=T(i);o&&(o.touched=t)}function te(i){const t=T(i);return t?t.touched:s.value.filter(o=>o.path.startsWith(i)).some(o=>o.touched)}function wn(i){const t=T(i);return t?t.dirty:s.value.filter(o=>o.path.startsWith(i)).some(o=>o.dirty)}function Pn(i){const t=T(i);return t?t.valid:s.value.filter(o=>o.path.startsWith(i)).every(o=>o.valid)}function Re(i){if(typeof i=="boolean"){H(t=>{t.touched=i});return}q(i).forEach(t=>{K(t,!!i[t])})}function en(i,t){var o;const d=t&&"value"in t?t.value:L(Z.value,i),y=T(i);y&&(y.__flags.pendingReset=!0),Be(i,E(d),!0),V(i,d,!1),K(i,(o=t==null?void 0:t.touched)!==null&&o!==void 0?o:!1),g(i,(t==null?void 0:t.errors)||[]),ee(()=>{y&&(y.__flags.pendingReset=!1)})}function Ue(i,t){let o=E(i!=null&&i.values?i.values:le.value);o=t!=null&&t.force?o:Oe(le.value,o),o=X(U)&&x(U.cast)?U.cast(o):o,D(o,{force:t==null?void 0:t.force}),H(d=>{var y;d.__flags.pendingReset=!0,d.validated=!1,d.touched=((y=i==null?void 0:i.touched)===null||y===void 0?void 0:y[d.path])||!1,V(d.path,L(o,d.path),!1),g(d.path,void 0)}),t!=null&&t.force?N(o,!1):A(o,!1),M((i==null?void 0:i.errors)||{}),h.value=(i==null?void 0:i.submitCount)||0,ee(()=>{he({mode:"silent"}),H(d=>{d.__flags.pendingReset=!1})})}async function he(i){const t=(i==null?void 0:i.mode)||"force";if(t==="force"&&H(m=>m.validated=!0),f.validateSchema)return f.validateSchema(t);a.value=!0;const o=await Promise.all(s.value.map(m=>m.validate?m.validate(i).then(I=>({key:m.path,valid:I.valid,errors:I.errors,value:I.value})):Promise.resolve({key:m.path,valid:!0,errors:[],value:void 0})));a.value=!1;const d={},y={},b={};for(const m of o)d[m.key]={valid:m.valid,errors:m.errors},m.value&&ie(b,m.key,m.value),m.errors.length&&(y[m.key]=m.errors[0]);return{valid:o.every(m=>m.valid),results:d,errors:y,values:b,source:"fields"}}async function oe(i,t){var o;const d=T(i);if(d&&(t==null?void 0:t.mode)!=="silent"&&(d.validated=!0),U){const{results:y}=await ne((t==null?void 0:t.mode)||"validated-only");return y[i]||{errors:[],valid:!0}}return d!=null&&d.validate?d.validate(t):(!d&&(o=t==null?void 0:t.warn),Promise.resolve({errors:[],valid:!0}))}function nn(i){on(Z.value,i)}function Fn(i,t,o=!1){Be(i,t),ie(c,i,t),o&&!(e!=null&&e.initialValues)&&ie(le.value,i,E(t))}function Be(i,t,o=!1){ie(Z.value,i,E(t)),o&&ie(le.value,i,E(t))}async function rn(){const i=w(U);if(!i)return{valid:!0,results:{},errors:{},source:"none"};a.value=!0;const t=Ie(i)||X(i)?await cr(i,c):await dr(i,c,{names:Q.value,bailsMap:$.value});return a.value=!1,t}const In=ge((i,{evt:t})=>{Yn(t)&&t.target.submit()});vn(()=>{if(e!=null&&e.initialErrors&&M(e.initialErrors),e!=null&&e.initialTouched&&Re(e.initialTouched),e!=null&&e.validateOnMount){he();return}f.validateSchema&&f.validateSchema("silent")}),Pe(U)&&se(U,()=>{var i;(i=f.validateSchema)===null||i===void 0||i.call(f,"validated-only")}),hn(Je,f);function De(i,t){const o=x(t)||t==null?void 0:t.label,d=T(O(i))||fe(i,{label:o}),y=()=>x(t)?t(Ee(d,we)):t||{};function b(){var P;d.touched=!0,((P=y().validateOnBlur)!==null&&P!==void 0?P:Ve().validateOnBlur)&&oe(d.path)}function m(){var P;((P=y().validateOnInput)!==null&&P!==void 0?P:Ve().validateOnInput)&&ee(()=>{oe(d.path)})}function I(){var P;((P=y().validateOnChange)!==null&&P!==void 0?P:Ve().validateOnChange)&&ee(()=>{oe(d.path)})}const C=j(()=>{const P={onChange:I,onInput:m,onBlur:b};return x(t)?Object.assign(Object.assign({},P),t(Ee(d,we)).props||{}):t!=null&&t.props?Object.assign(Object.assign({},P),t.props(Ee(d,we))):P});return[re(i,()=>{var P,R,z;return(z=(P=y().validateOnModelUpdate)!==null&&P!==void 0?P:(R=Ve())===null||R===void 0?void 0:R.validateOnModelUpdate)!==null&&z!==void 0?z:!0}),C]}function Cn(i){return Array.isArray(i)?i.map(t=>re(t,!0)):re(i)}function Nn(i,t){const[o,d]=De(i,t);function y(){d.value.onBlur()}function b(I){const C=Ce(I);V(O(i),C,!1),d.value.onInput()}function m(I){const C=Ce(I);V(O(i),C,!1),d.value.onChange()}return j(()=>Object.assign(Object.assign({},d.value),{onBlur:y,onInput:b,onChange:m,value:o.value}))}function Mn(i,t){const[o,d]=De(i,t),y=T(O(i));function b(m){o.value=m}return j(()=>{const m=x(t)?t(Ee(y,we)):t||{};return Object.assign({[m.model||"modelValue"]:o.value,[`onUpdate:${m.model||"modelValue"}`]:b},d.value)})}return Object.assign(Object.assign({},f),{values:kn(c),handleReset:()=>Ue(),submitForm:In})}function Or(e,n,r,l){const u={touched:"some",pending:"some",valid:"every"},a=j(()=>!B(n,w(r)));function h(){const c=e.value;return q(u).reduce((s,S)=>{const p=u[S];return s[S]=c[p](F=>F[S]),s},{})}const v=Fe(h());return Rn(()=>{const c=h();v.touched=c.touched,v.valid=c.valid,v.pending=c.pending}),j(()=>Object.assign(Object.assign({initialValues:w(r)},v),{valid:v.valid&&!q(l.value).length,dirty:a.value}))}function _r(e,n,r){const l=En(r),u=Y(l),a=Y(E(l));function h(v,c){c!=null&&c.force?(u.value=E(v),a.value=E(v)):(u.value=Oe(E(u.value)||{},E(v)),a.value=Oe(E(a.value)||{},E(v))),c!=null&&c.updateFields&&e.value.forEach(s=>{if(s.touched)return;const p=L(u.value,s.path);ie(n,s.path,E(p))})}return{initialValues:u,originalInitialValues:a,setInitialValues:h}}function Sr(e,n){return n?{valid:e.valid&&n.valid,errors:[...e.errors,...n.errors]}:e}export{jr as a,Er as u};

import{_ as O}from"./print-outline-rounded-cb227006.js";import{o as s,e as o,f as a,d as P,u as W,p as X,r as _,s as ee,c as te,i as I,a2 as ne,H as se,I as r,J as oe,K as ae,t as q,M as ie,h as g,j as S,F as ce,A as de,L as u,w as b,x as p,k as Z,ck as le,aS as _e,cl as re,a0 as ue,U as pe,aw as me,ax as he,Y as ve,Z as ye,$ as Te,_ as fe}from"./index-e23e99bf.js";import{u as qe}from"./markdown-beb3b221.js";const ge={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},be=a("path",{fill:"currentColor",d:"M5 21q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h6q.425 0 .713.288T12 4q0 .425-.288.713T11 5H5v14h14v-6q0-.425.288-.713T20 12q.425 0 .713.288T21 13v6q0 .825-.588 1.413T19 21H5Zm4-6q-.275-.275-.275-.7T9 13.6L17.6 5H15q-.425 0-.713-.288T14 4q0-.425.288-.713T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10q-.425 0-.713-.288T19 9V6.4l-8.625 8.625q-.275.275-.675.275T9 15Z"},null,-1),we=[be];function ke(i,c){return s(),o("svg",ge,we)}const Ce={name:"material-symbols-open-in-new-rounded",render:ke},$e={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ee=a("path",{fill:"currentColor",d:"M15.375 19.25q-.525.25-.95-.038T14 18.275q0-.25.163-.487t.412-.363q1.575-.75 2.5-2.225T18 11.95q0-1.125-.425-2.187T16.25 7.8L16 7.55V9q0 .425-.288.713T15 10q-.425 0-.713-.288T14 9V5q0-.425.288-.713T15 4h4q.425 0 .713.288T20 5q0 .425-.288.713T19 6h-1.75l.4.35q1.225 1.225 1.788 2.663T20 11.95q0 2.4-1.25 4.363t-3.375 2.937ZM5 20q-.425 0-.713-.288T4 19q0-.425.288-.713T5 18h1.75l-.4-.35q-1.225-1.225-1.788-2.663T4 12.05q0-2.4 1.25-4.362T8.625 4.75q.525-.25.95.038t.425.937q0 .25-.163.488t-.412.362q-1.575.75-2.5 2.225T6 12.05q0 1.125.425 2.188T7.75 16.2l.25.25V15q0-.425.288-.713T9 14q.425 0 .713.288T10 15v4q0 .425-.288.713T9 20H5Z"},null,-1),Fe=[Ee];function Me(i,c){return s(),o("svg",$e,Fe)}const Ve={name:"material-symbols-sync-rounded",render:Me},h=i=>(me("data-v-55bddc3f"),i=i(),he(),i),Le={class:"container"},He={class:"title"},xe={class:"subtitle v-center"},De={key:1,class:"author"},Ae=["onClick"],Be=h(()=>a("md-ripple",null,null,-1)),Ie={key:2,indeterminate:"",class:"spinner-sm"},Se=["disabled","onClick"],Ze=h(()=>a("md-ripple",null,null,-1)),Ne=["href"],Qe={class:"icon-button"},Ue=h(()=>a("md-ripple",null,null,-1)),Ge=["onClick"],Re=h(()=>a("md-ripple",null,null,-1)),Ke=["innerHTML"],m="FEED_ENTRY",Ye=P({__name:"FeedEntryView",setup(i){const{t:c}=W(),N=X(),w=_(N.params.id),n=_(),v=_(""),y=_(),{app:Q,urlTokenKey:U}=ee(te()),{render:k}=qe(Q,U),{refetch:C}=I({handle:async(e,t)=>{t?Z(c(t),"error"):(n.value=e.feedEntry,v.value=await k(e.feedEntry.content||e.feedEntry.description))},document:le,variables:()=>({id:w.value}),appApi:!0});I({handle:(e,t)=>{t?Z(c(t),"error"):e&&(y.value=e.tags)},document:_e,variables:{type:m},appApi:!0});const G=()=>{window.print()};function R(){var e,t;ve(ye,{type:m,tags:y.value,item:{key:(e=n.value)==null?void 0:e.id,title:"",size:0},selected:(t=y.value)==null?void 0:t.filter(T=>{var d;return(d=n.value)==null?void 0:d.tags.some(f=>f.id===T.id)})})}const{mutate:K,loading:$,onDone:Y}=ne({document:re,appApi:!0});Y(async e=>{const t=e.data;n.value=t.syncFeedContent,v.value=await k(t.syncFeedContent.content||t.syncFeedContent.description)});const j=()=>{K({id:w.value})},E=e=>{e.type===m&&C()},F=e=>{e.type===m&&C()};return se(()=>{r.on("item_tags_updated",F),r.on("items_tags_updated",E)}),oe(()=>{r.off("item_tags_updated",F),r.off("items_tags_updated",E)}),(e,t)=>{var M,V,L,H,x,D,A;const T=ue,d=Te,f=Ve,z=Ce,J=O,l=ae("tooltip");return s(),o("div",Le,[a("h2",He,q((M=n.value)==null?void 0:M.title),1),a("div",xe,[(V=n.value)!=null&&V.publishedAt?(s(),ie(T,{key:0,class:"time",id:g(pe)((L=n.value)==null?void 0:L.publishedAt),raw:n.value},null,8,["id","raw"])):S("",!0),(H=n.value)!=null&&H.author?(s(),o("span",De,q((x=n.value)==null?void 0:x.author),1)):S("",!0),(s(!0),o(ce,null,de((D=n.value)==null?void 0:D.tags,B=>(s(),o("span",{key:B.id,class:"badge"},q(B.name),1))),128)),u((s(),o("button",{class:"icon-button",onClick:b(R,["prevent"]),style:{"margin-inline-start":"8px"}},[Be,p(d)],8,Ae)),[[l,e.$t("add_to_tags")]]),g($)?(s(),o("md-circular-progress",Ie)):u((s(),o("button",{key:3,class:"icon-button btn-icon",disabled:g($),onClick:b(j,["prevent"])},[Ze,p(f)],8,Se)),[[l,e.$t("sync_content")]]),u((s(),o("a",{href:(A=n.value)==null?void 0:A.url,target:"_blank"},[a("button",Qe,[Ue,p(z)])],8,Ne)),[[l,e.$t("view_original_article")]]),u((s(),o("button",{class:"icon-button",onClick:b(G,["prevent"])},[Re,p(J)],8,Ge)),[[l,e.$t("print")]])]),a("div",{class:"md-container",innerHTML:v.value},null,8,Ke)])}}});const Oe=fe(Ye,[["__scopeId","data-v-55bddc3f"]]);export{Oe as default};

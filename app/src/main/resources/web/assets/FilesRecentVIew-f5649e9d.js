import{_ as O}from"./download-rounded-2da2fb73.js";import{_ as Q}from"./Breadcrumb-d5bdebe4.js";import{d as W,u as X,r as k,a as j,s as H,bh as J,Z as K,b1 as Z,H as q,o as n,c as a,e as l,f as C,j as o,w as P,l as i,N as D,Q as I,g as d,F as v,A as Y,z as ee,b2 as F,b3 as R,an as te,k as b,T as se,m as oe,a9 as ne,b4 as ae,b7 as le,b8 as ce,_ as ie}from"./index-5f5c60b6.js";import{c as de}from"./index-23cdd2f2.js";import{n as re}from"./list-6498ebd9.js";const ue={class:"v-toolbar"},me={class:"right-actions"},_e=["onClick","title"],pe={class:"form-check mt-2 me-3 ms-3"},he={class:"form-check-label",for:"select-mode"},ke={class:"panel-container"},ve={key:0,class:"file-items"},be=["onClick","onDblclick","onContextmenu"],fe=["onUpdate:modelValue"],ye=["src"],we={class:"title"},ge={style:{"font-size":"0.75rem"}},Ve={key:1,class:"no-data-placeholder"},Te={key:0,class:"file-item-info"},Ce=W({__name:"FilesRecentVIew",setup(De){const{t:h}=X(),x=k([]),r=k(!1),f=j(),{app:_}=H(f),{loading:E,files:u}=J(_),{downloadFile:y,downloadDir:A,downloadFiles:N}=ne(_),{view:w}=le(x,(e,s)=>{f.lightbox={sources:e,index:s,visible:!0}}),p=k(null),{mutate:S,onDone:$}=K({document:Z,appApi:!0});$(e=>{N(e.data.setTempValue.key)});const g=()=>{const e=[];return u.value.forEach(s=>{s.checked&&e.push({path:s.path})}),e},U=()=>{S({key:ae(),value:JSON.stringify(g())})},z=q(()=>g().length>0);function M(e){if(r.value){e.checked=!e.checked;return}p.value=e}function V(e){return F(e.name)||R(e.name)||ce(e.name)}function L(e){V(e)?w(u.value,e):y(e.path)}function B(e,s){e.preventDefault();let c;s.isDir?c=[{label:h("download"),onClick:()=>{A(s.path)}}]:(c=[],V(s)&&c.push({label:h("open"),onClick:()=>{w(u.value,s)}}),c.push({label:h("download"),onClick:()=>{y(s.path)}})),de({x:e.x,y:e.y,items:c})}return(e,s)=>{const c=Q,G=O;return n(),a(v,null,[l("div",ue,[C(c,{current:e.$t("recent_files")},null,8,["current"]),l("div",me,[r.value&&o(z)?(n(),a("button",{key:0,type:"button",class:"btn btn-action",onClick:P(U,["stop"]),title:e.$t("download")},[C(G,{class:"bi"})],8,_e)):i("",!0),l("div",pe,[D(l("input",{class:"form-check-input","onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),id:"select-mode",type:"checkbox"},null,512),[[I,r.value]]),l("label",he,d(e.$t("select_mode")),1)])])]),l("div",ke,[o(_).permissions.includes("WRITE_EXTERNAL_STORAGE")?(n(),a("div",ve,[(n(!0),a(v,null,Y(o(u),t=>{var T;return n(),a("div",{key:t.path,class:ee(["file-item",{active:((T=p.value)==null?void 0:T.path)===t.path}]),onClick:m=>M(t),onDblclick:m=>L(t),onContextmenu:m=>B(m,t)},[r.value?D((n(),a("input",{key:0,class:"form-check-input","onUpdate:modelValue":m=>t.checked=m,type:"checkbox"},null,8,fe)),[[I,t.checked]]):i("",!0),o(F)(t.name)||o(R)(t.name)?(n(),a("img",{key:1,src:o(te)(t.fileId)+"&w=50&h=50",width:"50",height:"50"},null,8,ye)):i("",!0),l("div",we,[b(d(t.name)+" ",1),l("div",ge,[b(d(o(se)(t.updatedAt)),1),t.isDir?i("",!0):(n(),a(v,{key:0},[b(", "+d(o(oe)(t.size)),1)],64))])])],42,be)}),128))])):i("",!0),o(u).length===0?(n(),a("div",Ve,d(e.$t(o(re)(o(E),o(_).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):i("",!0)]),p.value?(n(),a("div",Te,d(e.$t("path"))+": "+d(p.value.path),1)):i("",!0)],64)}}});const Ae=ie(Ce,[["__scopeId","data-v-0cc9a1fe"]]);export{Ae as default};

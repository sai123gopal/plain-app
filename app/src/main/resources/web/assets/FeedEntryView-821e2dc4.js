import{_ as Y}from"./print-outline-rounded-f43d6e40.js";import{o as s,c as o,a,d as Z,u as W,D as X,r,s as ee,f as te,g as Q,i as ne,O as se,P as _,Q as oe,R as ae,t as g,S as ie,j as b,k as S,F as ce,J as le,m as u,l as q,p,x as I,cq as de,aT as re,cr as _e,a5 as ue,Z as pe,A as me,B as he,a2 as ve,a3 as ye,a4 as Te,_ as fe}from"./index-9c78c93b.js";import{u as ge}from"./markdown-de24da33.js";const be={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},qe=a("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h14v-6q0-.425.288-.712T20 12t.713.288T21 13v6q0 .825-.587 1.413T19 21zM19 6.4L10.4 15q-.275.275-.7.275T9 15t-.275-.7t.275-.7L17.6 5H15q-.425 0-.712-.288T14 4t.288-.712T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10t-.712-.288T19 9z"},null,-1),we=[qe];function ke(i,c){return s(),o("svg",be,we)}const Ce={name:"material-symbols-open-in-new-rounded",render:ke},$e={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ee=a("path",{fill:"currentColor",d:"M6 12.05q0 1.125.425 2.188T7.75 16.2l.25.25V15q0-.425.288-.712T9 14t.713.288T10 15v4q0 .425-.288.713T9 20H5q-.425 0-.712-.288T4 19t.288-.712T5 18h1.75l-.4-.35q-1.3-1.15-1.825-2.625T4 12.05Q4 9.7 5.2 7.787T8.425 4.85q.35-.2.738-.025t.512.575q.125.375-.012.75t-.488.575q-1.45.8-2.312 2.213T6 12.05m12-.1q0-1.125-.425-2.187T16.25 7.8L16 7.55V9q0 .425-.288.713T15 10t-.712-.288T14 9V5q0-.425.288-.712T15 4h4q.425 0 .713.288T20 5t-.288.713T19 6h-1.75l.4.35q1.225 1.225 1.788 2.663T20 11.95q0 2.35-1.2 4.263t-3.225 2.937q-.35.2-.737.025t-.513-.575q-.125-.375.013-.75t.487-.575q1.45-.8 2.313-2.212T18 11.95"},null,-1),Fe=[Ee];function Le(i,c){return s(),o("svg",$e,Fe)}const Me={name:"material-symbols-sync-rounded",render:Le},h=i=>(me("data-v-5b41a86a"),i=i(),he(),i),Ve={class:"container"},De={class:"title"},Be={class:"subtitle v-center"},He={key:1,class:"author"},xe=["onClick"],Ae=h(()=>a("md-ripple",null,null,-1)),Qe={key:2,indeterminate:"",class:"spinner-sm"},Se=["disabled","onClick"],Ie=h(()=>a("md-ripple",null,null,-1)),Ne=["href"],Re={class:"icon-button"},ze=h(()=>a("md-ripple",null,null,-1)),Ge=["onClick"],Ue=h(()=>a("md-ripple",null,null,-1)),je=["innerHTML"],m="FEED_ENTRY",Je=Z({__name:"FeedEntryView",setup(i){const{t:c}=W(),N=X(),w=r(N.params.id),n=r(),v=r(""),y=r(),{app:R,urlTokenKey:z}=ee(te()),{render:k}=ge(R,z),{refetch:C}=Q({handle:async(e,t)=>{t?I(c(t),"error"):(n.value=e.feedEntry,v.value=await k(e.feedEntry.content||e.feedEntry.description))},document:de,variables:()=>({id:w.value}),appApi:!0});Q({handle:(e,t)=>{t?I(c(t),"error"):e&&(y.value=e.tags)},document:re,variables:{type:m},appApi:!0});const G=()=>{window.print()};function U(){var e,t;ve(ye,{type:m,tags:y.value,item:{key:(e=n.value)==null?void 0:e.id,title:"",size:0},selected:(t=y.value)==null?void 0:t.filter(T=>{var l;return(l=n.value)==null?void 0:l.tags.some(f=>f.id===T.id)})})}const{mutate:j,loading:$,onDone:J}=ne({document:_e,appApi:!0});J(async e=>{const t=e.data;n.value=t.syncFeedContent,v.value=await k(t.syncFeedContent.content||t.syncFeedContent.description)});const K=()=>{j({id:w.value})},E=e=>{e.type===m&&C()},F=e=>{e.type===m&&C()};return se(()=>{_.on("item_tags_updated",F),_.on("items_tags_updated",E)}),oe(()=>{_.off("item_tags_updated",F),_.off("items_tags_updated",E)}),(e,t)=>{var L,M,V,D,B,H,x;const T=ue,l=Te,f=Me,O=Ce,P=Y,d=ae("tooltip");return s(),o("div",Ve,[a("h2",De,g((L=n.value)==null?void 0:L.title),1),a("div",Be,[(M=n.value)!=null&&M.publishedAt?(s(),ie(T,{key:0,class:"time",id:b(pe)((V=n.value)==null?void 0:V.publishedAt),raw:n.value},null,8,["id","raw"])):S("",!0),(D=n.value)!=null&&D.author?(s(),o("span",He,g((B=n.value)==null?void 0:B.author),1)):S("",!0),(s(!0),o(ce,null,le((H=n.value)==null?void 0:H.tags,A=>(s(),o("span",{key:A.id,class:"badge"},g(A.name),1))),128)),u((s(),o("button",{class:"icon-button",onClick:q(U,["prevent"]),style:{"margin-inline-start":"8px"}},[Ae,p(l)],8,xe)),[[d,e.$t("add_to_tags")]]),b($)?(s(),o("md-circular-progress",Qe)):u((s(),o("button",{key:3,class:"icon-button btn-icon",disabled:b($),onClick:q(K,["prevent"])},[Ie,p(f)],8,Se)),[[d,e.$t("sync_content")]]),u((s(),o("a",{href:(x=n.value)==null?void 0:x.url,target:"_blank"},[a("button",Re,[ze,p(O)])],8,Ne)),[[d,e.$t("view_original_article")]]),u((s(),o("button",{class:"icon-button",onClick:q(G,["prevent"])},[Ue,p(P)],8,Ge)),[[d,e.$t("print")]])]),a("div",{class:"md-container",innerHTML:v.value},null,8,je)])}}});const Ye=fe(Je,[["__scopeId","data-v-5b41a86a"]]);export{Ye as default};

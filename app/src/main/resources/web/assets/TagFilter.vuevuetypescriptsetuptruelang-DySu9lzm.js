import{_ as P}from"./more-vert-zjmMMiPD.js";import{o as s,c as u,a as n,d as j,g as z,u as F,h as m,l as x,C as O,b9 as U,af as Z,a1 as r,ag as J,S as K,p as v,t as l,x as C,v as q,q as M,w as g,O as w,P as R,N as W,Z as h,j as S,ci as X,cj as Y,ad as ee,ck as te,a7 as ne,f as ae,cl as oe,a8 as se,a2 as ie,aP as le}from"./index-R8dLcqG_.js";import{E as V}from"./EditValueModal-O1aAFYgx.js";const ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},de=n("path",{fill:"currentColor",d:"M11 13H6q-.425 0-.712-.288T5 12t.288-.712T6 11h5V6q0-.425.288-.712T12 5t.713.288T13 6v5h5q.425 0 .713.288T19 12t-.288.713T18 13h-5v5q0 .425-.288.713T12 19t-.712-.288T11 18z"},null,-1),re=[de];function ue(p,o){return s(),u("svg",ce,[...re])}const pe={name:"material-symbols-add-rounded",render:ue},_e={class:"top-app-bar"},me={class:"btn-icon no-click"},ve={class:"title"},ge={class:"actions"},he={class:"nav"},fe=["onClick"],ye={class:"title"},Te={class:"count"},$e=["anchor","open"],be={slot:"headline"},ke={slot:"headline"},we=j({__name:"TagFilter",props:{type:{type:String,required:!0},selected:{type:String,required:!0}},setup(p){const o=p,{t:i}=z(),B=F(),f=m([]),_=m(!1),c=m(),{refetch:d}=x({handle:(e,t)=>{t?O(i(t),"error"):e&&(f.value=e.tags)},document:U,variables:{type:o.type},appApi:!0});function L(e){c.value=e,_.value=!0}function Q(e){h(V,{title:i("rename"),placeholder:i("name"),value:e.name,mutation:()=>S({document:X,appApi:!0}),getVariables:t=>({id:e.id,name:t}),done:()=>{d()}})}function A(e){h(ee,{id:e.id,name:e.name,gql:Y,appApi:!0,typeName:"Tag"})}function D(){h(V,{title:i("add_tag"),placeholder:i("name"),mutation:()=>S({document:te,options:{update:()=>{d()}},appApi:!0}),getVariables:e=>({type:o.type,name:e})})}function G(e){const t=ne([{name:"tag_id",op:"",value:e.id}]);ae(B,`/${oe[o.type]}?q=${se(t)}`)}const y=e=>{e===o.type&&d()},T=e=>{e.type===o.type&&d()};return Z(()=>{r.on("refetch_tags",y),r.on("media_items_actioned",T)}),J(()=>{r.off("refetch_tags",y),r.off("media_items_actioned",T)}),(e,t)=>{var k;const N=ie,E=pe,$=le,H=P,b=K("tooltip");return s(),u(w,null,[n("div",_e,[n("div",me,[v(N)]),n("div",ve,l(e.$t("tags")),1),n("div",ge,[C((s(),q($,{onClick:g(D,["prevent"])},{icon:M(()=>[v(E)]),_:1})),[[b,e.$t("add_tag")]])])]),n("ul",he,[(s(!0),u(w,null,R(f.value,a=>(s(),u("li",{onClick:g(I=>G(a),["prevent"]),key:a.id,class:W({active:a.id===p.selected})},[n("span",ye,l(a.name),1),C((s(),q($,{id:"tag-"+a.id,class:"sm",onClick:g(I=>L(a),["prevent","stop"])},{icon:M(()=>[v(H)]),_:2},1032,["id","onClick"])),[[b,e.$t("actions")]]),n("span",Te,l(a.count.toLocaleString()),1)],10,fe))),128))]),n("md-menu",{positioning:"popover",anchor:"tag-"+((k=c.value)==null?void 0:k.id),"stay-open-on-focusout":"",quick:"",open:_.value,onClosed:t[2]||(t[2]=a=>_.value=!1)},[n("md-menu-item",{onClick:t[0]||(t[0]=a=>Q(c.value))},[n("div",be,l(e.$t("rename")),1)]),n("md-menu-item",{onClick:t[1]||(t[1]=a=>A(c.value))},[n("div",ke,l(e.$t("delete")),1)])],40,$e)],64)}}});export{we as _,pe as a};

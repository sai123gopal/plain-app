import{o as n,e as o,f as t,d as U,u as j,r as v,a2 as b,H as J,I as h,J as K,i as W,k as $,K as O,x as d,F as P,L as k,h as s,t as f,j as p,bt as X,bu as Y,bv as ee,bw as te,aw as ne,ax as oe,_ as se}from"./index-e23e99bf.js";import{_ as re}from"./refresh-rounded-7ac3ecb1.js";import{_ as ae}from"./Breadcrumb-ba8f6aaf.js";const ie={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ce=t("path",{fill:"currentColor",d:"M6 19q-.425 0-.713-.288T5 18v-3q0-.425.288-.713T6 14q.425 0 .713.288T7 15v2h2q.425 0 .713.288T10 18q0 .425-.288.713T9 19H6Zm0-9q-.425 0-.713-.288T5 9V6q0-.425.288-.713T6 5h3q.425 0 .713.288T10 6q0 .425-.288.713T9 7H7v2q0 .425-.288.713T6 10Zm9 9q-.425 0-.713-.288T14 18q0-.425.288-.713T15 17h2v-2q0-.425.288-.713T18 14q.425 0 .713.288T19 15v3q0 .425-.288.713T18 19h-3Zm3-9q-.425 0-.713-.288T17 9V7h-2q-.425 0-.713-.288T14 6q0-.425.288-.713T15 5h3q.425 0 .713.288T19 6v3q0 .425-.288.713T18 10Z"},null,-1),le=[ce];function _e(r,a){return n(),o("svg",ie,le)}const ue={name:"material-symbols-fullscreen-rounded",render:_e},de={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},pe=t("path",{fill:"currentColor",d:"M12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Zm0-10Zm0 8q3.325 0 5.663-2.337T20 12q0-3.325-2.337-5.663T12 4Q8.675 4 6.337 6.337T4 12q0 3.325 2.337 5.663T12 20Zm-3-4h6q.425 0 .713-.288T16 15V9q0-.425-.288-.713T15 8H9q-.425 0-.713.288T8 9v6q0 .425.288.713T9 16Z"},null,-1),me=[pe];function ve(r,a){return n(),o("svg",de,me)}const he={name:"material-symbols-stop-circle-outline-rounded",render:ve},fe="/assets/screen-mirror-permission-e9e07af8.png",ge={xmlns:"http://www.w3.org/2000/svg",viewBox:"176.31 -11.19 346.88 581.88"},qe=t("path",{d:"M470.49 0H229.51a41.901 41.901 0 0 0-29.547 12.277 41.898 41.898 0 0 0-12.277 29.547v476.35a41.901 41.901 0 0 0 12.277 29.547 41.898 41.898 0 0 0 29.547 12.277h240.98a41.901 41.901 0 0 0 29.547-12.277 41.898 41.898 0 0 0 12.277-29.547V41.824a41.901 41.901 0 0 0-12.277-29.547A41.898 41.898 0 0 0 470.49 0zm33.25 518.18a33.334 33.334 0 0 1-9.766 23.484 33.335 33.335 0 0 1-23.484 9.766H229.51a33.334 33.334 0 0 1-23.484-9.766 33.335 33.335 0 0 1-9.765-23.484V41.83a33.333 33.333 0 0 1 9.828-23.371 33.32 33.32 0 0 1 23.422-9.703h240.98a33.334 33.334 0 0 1 23.484 9.765 33.335 33.335 0 0 1 9.765 23.484z"},null,-1),Te=t("path",{d:"M317.62 46.812h64.75c2.418 0 4.375-1.957 4.375-4.375s-1.957-4.375-4.375-4.375h-64.75c-2.418 0-4.375 1.957-4.375 4.375s1.957 4.375 4.375 4.375zM364.7 192.5a16.8 16.8 0 0 0-14.7-8.75 16.8 16.8 0 0 0-14.698 8.75l-91 157.5a16.453 16.453 0 0 0 0 16.977 16.584 16.584 0 0 0 6.101 6.386 16.653 16.653 0 0 0 8.512 2.364h182.09a16.626 16.626 0 0 0 14.7-8.75 16.803 16.803 0 0 0 0-16.977zm83.562 170.36a8.224 8.224 0 0 1-7.262 4.2H258.91a8.229 8.229 0 0 1-7.176-4.2 8.753 8.753 0 0 1 0-8.75l91-157.5a8.748 8.748 0 0 1 7.262-4.113 8.757 8.757 0 0 1 7.262 4.199l91 157.5a8.75 8.75 0 0 1 0 8.84z"},null,-1),be=t("path",{d:"M350 221.55a4.288 4.288 0 0 0-4.29 4.285v66.238a4.375 4.375 0 0 0 8.75 0v-66.238a4.286 4.286 0 0 0-4.46-4.285zm0 91.26a4.289 4.289 0 0 0-4.29 4.29v17.061a4.375 4.375 0 0 0 8.75 0V317.1a4.286 4.286 0 0 0-4.46-4.29z"},null,-1),$e=[qe,Te,be];function ke(r,a){return n(),o("svg",ge,$e)}const ye={render:ke},m=r=>(ne("data-v-ee40458c"),r=r(),oe(),r),Me={class:"page-container"},Se={class:"main"},we={class:"v-toolbar"},Ie=["disabled"],Ve=m(()=>t("md-ripple",null,null,-1)),Ce=m(()=>t("md-ripple",null,null,-1)),Ae=m(()=>t("md-ripple",null,null,-1)),He={key:0,class:"loading"},Le=m(()=>t("md-circular-progress",{indeterminate:""},null,-1)),Ze=[Le],ze={key:1,class:"request-permission"},De=m(()=>t("img",{src:fe},null,-1)),xe={class:"text"},Be={key:2,class:"request-permission-failed"},Qe=["src"],Ee=U({__name:"ScreenMirrorView",setup(r){let a;const{t:g}=j(),i=v(""),_=v(0),u=v(!1),y=v(),M=async e=>{i.value=e,u.value=!1,_.value=0,clearInterval(a)};let c=!1;const{mutate:I}=b({document:X,appApi:!0}),V=()=>{I(),c=!0},S=e=>{e&&c&&(c=!1,clearInterval(a),q())};J(()=>{h.on("screen_mirroring",M),h.on("app_socket_connection_changed",S)}),K(()=>{h.off("screen_mirroring",M),h.off("app_socket_connection_changed",S)});const{mutate:C,loading:A,onDone:H,onError:L}=b({document:Y,appApi:!0}),{loading:Z,refetch:z}=W({handle:(e,l)=>{l?$(g(l),"error"):(i.value=e.screenMirrorImage,e.screenMirrorImage||q())},document:ee,appApi:!0}),D=()=>{var e;(e=y.value)==null||e.requestFullscreen({navigationUI:"show"})},q=()=>{u.value=!1,C()};L(e=>{$(g(e.message)),u.value=!0}),H(()=>{_.value=30,a=setInterval(()=>{_.value--,_.value<=0&&(u.value=!0,clearInterval(a))},1e3)});const{mutate:w,loading:x,onDone:B,onError:Q}=b({document:te,appApi:!0});return Q(e=>{$(g(e.message))}),B(()=>{u.value=!0,i.value=""}),(e,l)=>{const E=ae,F=he,G=re,N=ue,T=O("tooltip");return n(),o("div",Me,[t("div",Se,[t("div",we,[d(E,{current:()=>e.$t("screen_mirror")},null,8,["current"]),i.value?(n(),o(P,{key:0},[k((n(),o("button",{class:"icon-button",disabled:s(x),onClick:l[0]||(l[0]=(...R)=>s(w)&&s(w)(...R))},[Ve,d(F)],8,Ie)),[[T,e.$t("stop_mirror")]]),k((n(),o("button",{class:"icon-button",onClick:l[1]||(l[1]=()=>s(z)())},[Ce,d(G)])),[[T,e.$t("refresh")]]),k((n(),o("button",{class:"icon-button",onClick:D},[Ae,d(N)])),[[T,e.$t("fullscreen")]])],64)):s(c)?p("",!0):(n(),o("md-outlined-button",{key:1,onClick:V},f(e.$t("relaunch_app")),1))]),t("div",{ref_key:"containerRef",ref:y,class:"panel-container"},[s(Z)||s(A)||s(c)?(n(),o("div",He,Ze)):p("",!0),_.value>0&&!s(c)?(n(),o("div",ze,[De,t("pre",xe,f(e.$t("screen_mirror_request_permission",{seconds:_.value})),1)])):p("",!0),u.value&&!i.value&&!s(c)?(n(),o("div",Be,[d(s(ye)),t("p",null,f(e.$t("screen_mirror_request_permission_failed")),1),t("md-filled-button",{onClick:q},f(e.$t("try_again")),1)])):p("",!0),i.value?(n(),o("img",{key:3,src:i.value},null,8,Qe)):p("",!0)],512)])])}}});const Re=se(Ee,[["__scopeId","data-v-ee40458c"]]);export{Re as default};

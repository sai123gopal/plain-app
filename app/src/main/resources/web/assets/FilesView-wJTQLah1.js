import{_ as on}from"./more-vert-De1QBMLo.js";import{o as n,c as o,a as t,d as je,u as Xe,I as Je,h as q,S as Ye,e as I,p,x as _,w as u,y as sn,A as ln,t as d,O as g,f as Ze,bp as an,F as et,G as tt,bq as nt,H as ot,br as cn,g as dn,s as pe,i as rn,aD as un,aE as Re,bs as _n,bt as pn,bu as hn,K as mn,bv as vn,ag as Ke,j as fn,L as kn,M as bn,m as l,P as he,v as B,q as y,aG as yn,Q as gn,ap as $n,C as wn,bw as Cn,bx as Tn,by as qn,Z as X,am as In,V as me,N as Dn,aA as Sn,E,U as Vn,W as En,bc as Fn,X as Ln,Y as Nn,ao as Bn,bz as Mn,aL as zn,bA as An,bB as Pe,bC as Oe,ai as Qe,bD as Ge,a0 as Hn,a1 as J,ae as Un,aq as Rn,a3 as Kn,bE as Pn,bF as On,bG as Qn}from"./index-Dn0O6zoH.js";import{_ as Gn}from"./sort-rounded-BSs7VajO.js";import{_ as xn}from"./refresh-rounded-Hy-MeToW.js";import{_ as Wn}from"./content-paste-rounded-BzLAqKYY.js";import{_ as jn}from"./upload-rounded-q7e5EuXT.js";import{_ as Xn}from"./search-rounded-C8Nl_ZR1.js";import{_ as st}from"./default-BQXvEOng.js";import{E as xe}from"./EditValueModal-Du2st8tU.js";import{u as Jn,c as Yn}from"./key-events-CgPzNP0J.js";import"./vee-validate.esm-0lx5owW0.js";const Zn={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},eo=t("path",{fill:"currentColor",d:"M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h5.175q.4 0 .763.15t.637.425L12 6h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm0-2h16V8h-8.825l-2-2H4zm0 0V6zm10-4v1q0 .425.288.713T15 16t.713-.288T16 15v-1h1q.425 0 .713-.288T18 13t-.288-.712T17 12h-1v-1q0-.425-.288-.712T15 10t-.712.288T14 11v1h-1q-.425 0-.712.288T12 13t.288.713T13 14z"},null,-1),to=[eo];function no(k,h){return n(),o("svg",Zn,[...to])}const oo={name:"material-symbols-create-new-folder-outline-rounded",render:no},so={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},lo=t("path",{fill:"currentColor",d:"M19.075 21.9L17.5 20.35q-1.225.8-2.613 1.225T12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12q0-1.5.425-2.887T3.65 6.5L2.075 4.925q-.3-.3-.3-.712t.3-.713t.713-.3t.712.3l17 17q.3.3.3.7t-.3.7t-.712.3t-.713-.3M12 20q1.075 0 2.088-.275t1.962-.825L5.1 7.95q-.55.95-.825 1.962T4 12q0 3.325 2.338 5.663T12 20m0-16q-.825 0-1.612.163T8.85 4.65q-.4.175-.8.05t-.6-.475t-.088-.75t.488-.575q.975-.45 2.012-.675T12 2q2.075 0 3.9.788t3.175 2.137T21.213 8.1T22 12q0 1.1-.225 2.138T21.1 16.15q-.175.375-.575.488t-.75-.088t-.475-.6t.05-.8q.325-.75.488-1.537T20 12q0-3.325-2.337-5.663T12 4m-1.425 9.425"},null,-1),ao=[lo];function io(k,h){return n(),o("svg",so,[...ao])}const co={name:"material-symbols-hide-source-outline-rounded",render:io},ro=k=>(et("data-v-9cf9791f"),k=k(),tt(),k),uo={key:"filter-text"},_o=["label"],po={key:"filter-parent"},ho=["label"],mo={key:"filter-show-hidden"},vo=["label"],fo=ro(()=>t("md-ripple",null,null,-1)),ko=["open"],bo={class:"filters"},yo={class:"form-row"},go=["label"],$o=["label","selected"],wo=["label","selected"],Co={class:"buttons"},To=je({__name:"FileSearchInput",props:{parent:{type:String,required:!0},filter:{type:Object,required:!0},getUrl:{type:Function,required:!0}},setup(k,{expose:h}){const{copyFilter:R,buildQ:Y}=nt(),Z=Xe(),i=Je({showHidden:!1,linkName:"",text:"",parent:""}),b=k,F=q(!1);function S(){R(i,b.filter),v(),M()}function v(){Ze(Z,b.getUrl(Y(b.filter)))}function $(){b.filter.text="",v()}function K(){F.value=!0,R(b.filter,i)}function M(){F.value=!1}function D(){i.parent=i.parent?"":b.parent}function P(){b.filter.parent="",v()}function O(){b.filter.showHidden=!1,v()}function V(){i.showHidden=!i.showHidden}return h({dismiss:M}),(w,z)=>{const ee=an,te=co,ne=Xn,oe=Ye("tooltip");return n(),o(g,null,[t("md-chip-set",null,[b.filter.text?(n(),o("div",uo,[t("md-input-chip",{label:b.filter.text,"remove-only":"",onRemove:$},null,40,_o)])):I("",!0),b.filter.parent?(n(),o("div",po,[t("md-input-chip",{label:w.$t("current_folder"),"remove-only":"",onRemove:P},[p(ee,{slot:"icon"})],40,ho)])):I("",!0),b.filter.showHidden?(n(),o("div",mo,[t("md-input-chip",{label:w.$t("show_hidden"),"remove-only":"",onRemove:O},[p(te,{slot:"icon"})],40,vo)])):I("",!0)]),_((n(),o("button",{id:"btn-search",class:"btn-icon",onClick:u(K,["prevent"])},[fo,p(ne)])),[[oe,w.$t("search")]]),t("md-menu",{positioning:"popover",anchor:"btn-search","menu-corner":"start-end","anchor-corner":"end-end","stay-open-on-focusout":"",quick:"",open:F.value,onClosed:M},[t("div",bo,[t("div",yo,[_(t("md-outlined-text-field",{label:w.$t("keywords"),"onUpdate:modelValue":z[0]||(z[0]=Q=>i.text=Q),onKeyup:ln(S,["enter"])},null,40,go),[[sn,i.text]])]),t("md-chip-set",null,[t("md-filter-chip",{key:"chip-parent",label:w.$t("current_folder"),selected:i.parent!=="",onClick:D},null,8,$o),t("md-filter-chip",{key:"chip-show-hidden",label:w.$t("show_hidden"),selected:i.showHidden,onClick:V},null,8,wo)]),t("div",Co,[t("md-filled-button",{onClick:u(S,["stop"])},d(w.$t("search")),1)])])],40,ko)],64)}}}),qo=ot(To,[["__scopeId","data-v-9cf9791f"]]),Io={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Do=t("path",{fill:"currentColor",d:"m12 14l-2.35 2.35q.2.375.275.8T10 18q0 1.65-1.175 2.825T6 22t-2.825-1.175T2 18t1.175-2.825T6 14q.425 0 .85.075t.8.275L10 12L7.65 9.65q-.375.2-.8.275T6 10q-1.65 0-2.825-1.175T2 6t1.175-2.825T6 2t2.825 1.175T10 6q0 .425-.075.85t-.275.8L20.6 18.6q.675.675.3 1.538T19.575 21q-.275 0-.537-.112t-.463-.313zm3-3l-2-2l5.575-5.575q.2-.2.463-.312T19.574 3q.95 0 1.313.875t-.313 1.55zM6 8q.825 0 1.413-.587T8 6t-.587-1.412T6 4t-1.412.588T4 6t.588 1.413T6 8m6 4.5q.2 0 .35-.15t.15-.35t-.15-.35t-.35-.15t-.35.15t-.15.35t.15.35t.35.15M6 20q.825 0 1.413-.587T8 18t-.587-1.412T6 16t-1.412.588T4 18t.588 1.413T6 20"},null,-1),So=[Do];function Vo(k,h){return n(),o("svg",Io,[...So])}const Eo={name:"material-symbols-content-cut-rounded",render:Vo},Fo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Lo=t("path",{fill:"currentColor",d:"M9 18q-.825 0-1.412-.587T7 16V4q0-.825.588-1.412T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.587 1.413T18 18zm0-2h9V4H9zm-4 6q-.825 0-1.412-.587T3 20V7q0-.425.288-.712T4 6t.713.288T5 7v13h10q.425 0 .713.288T16 21t-.288.713T15 22zm4-6V4z"},null,-1),No=[Lo];function Bo(k,h){return n(),o("svg",Fo,[...No])}const Mo={name:"material-symbols-content-copy-outline-rounded",render:Bo},zo=cn({id:"files",state:()=>({selectedFiles:[],isCut:!1})}),f=k=>(et("data-v-5dc7d0ab"),k=k(),tt(),k),Ao={class:"top-app-bar"},Ho=["checked","indeterminate"],Uo={key:0},Ro={key:1,class:"breadcrumb"},Ko={key:0},Po=["onClick"],Oo={key:0},Qo=["onClick"],Go=f(()=>t("md-ripple",null,null,-1)),xo=f(()=>t("md-ripple",null,null,-1)),Wo=f(()=>t("md-ripple",null,null,-1)),jo=f(()=>t("md-ripple",null,null,-1)),Xo={key:0,indeterminate:""},Jo={class:"actions"},Yo=f(()=>t("md-ripple",null,null,-1)),Zo={class:"btn-icon"},es=f(()=>t("md-ripple",null,null,-1)),ts=["onClick"],ns={slot:"headline"},os=["onClick"],ss={slot:"headline"},ls=["disabled"],as=f(()=>t("md-ripple",null,null,-1)),is={key:0,indeterminate:""},cs=["disabled"],ds=f(()=>t("md-ripple",null,null,-1)),rs={key:0,indeterminate:""},us=["disabled"],_s=f(()=>t("md-ripple",null,null,-1)),ps={key:0,indeterminate:""},hs={class:"menu-items"},ms=["onClick","selected"],vs={slot:"headline"},fs={key:0,class:"scroller"},ks={class:"start"},bs=f(()=>t("div",{class:"checkbox"},[t("div",{class:"skeleton-checkbox"})],-1)),ys={class:"number"},gs=Nn('<div class="image" data-v-5dc7d0ab><div class="skeleton-image" data-v-5dc7d0ab></div></div><div class="title" data-v-5dc7d0ab><div class="skeleton-text skeleton-title" data-v-5dc7d0ab></div></div><div class="subtitle" data-v-5dc7d0ab><div class="skeleton-text skeleton-subtitle" data-v-5dc7d0ab></div></div><div class="actions" data-v-5dc7d0ab><div class="skeleton-text skeleton-actions" data-v-5dc7d0ab></div></div>',4),$s=["onClick","onMouseover"],ws={class:"start"},Cs=["onClick","checked"],Ts=["onClick","checked"],qs={class:"number"},Is=["onClick"],Ds={key:0,src:"/ficons/folder.svg",class:"svg"},Ss={key:0,class:"svg",src:st},Vs=["src","onError"],Es=["src","onError"],Fs={key:3,class:"svg",src:st},Ls={class:"title"},Ns={class:"subtitle"},Bs={key:0},Ms={key:1},zs={class:"actions"},As=["onClick"],Hs=f(()=>t("md-ripple",null,null,-1)),Us={class:"btn-icon sm"},Rs=f(()=>t("md-ripple",null,null,-1)),Ks=["onClick"],Ps={slot:"headline"},Os=["onClick"],Qs={slot:"headline"},Gs=["onClick"],xs=f(()=>t("md-ripple",null,null,-1)),Ws=["onClick"],js=f(()=>t("md-ripple",null,null,-1)),Xs={class:"btn-icon sm"},Js=f(()=>t("md-ripple",null,null,-1)),Ys={class:"card card-info"},Zs={class:"key-value vertical"},el={class:"key"},tl={class:"value"},nl={class:"btn-icon sm"},ol=f(()=>t("md-ripple",null,null,-1)),sl=["onClick"],ll={slot:"headline"},al=["onClick"],il={slot:"headline"},cl=["onClick"],dl={slot:"headline"},rl=["onClick"],ul={slot:"headline"},_l=["onClick"],pl={slot:"headline"},hl={key:1,class:"no-data-placeholder"},We=1e4,ml=je({__name:"FilesView",setup(k){var He;const{t:h}=dn(),R=q([]),{parseQ:Y,buildQ:Z}=nt(),i=Je({linkName:"",showHidden:!1,text:"",parent:""}),F=gn().query,S=q(""),v=q([]),{selectedIds:$,allChecked:K,realAllChecked:M,clearSelection:D,toggleAllChecked:P,toggleSelect:O,total:V,checked:w,shiftEffectingIds:z,handleItemClick:ee,handleMouseOver:te,selectAll:ne,shouldSelect:oe}=Jn(v),{keyDown:Q,keyUp:ve}=Yn(V,ne,D,()=>{}),G=q(!1),x=q(!1),fe=q([]),ke=q([]),lt=e=>{fe.value.push(e)},at=e=>{ke.value.push(e)},it=Bn(),be=Xe(),{fileSortBy:se}=pe(be),ye=rn(),{app:ge,urlTokenKey:A,uploads:le}=pe(ye),{selectedFiles:ct,isCut:dt}=pe(zo()),{dropping:rt,fileDragEnter:$e,fileDragLeave:we,dropFiles:ut}=un(le),W=Re(()=>Mn(i.linkName,ge.value)),{createPath:_t,createVariables:pt,createMutation:ht}=_n(A,v),{renameItem:mt,renameDone:vt,renameMutation:ft,renameVariables:kt}=pn(()=>{H()}),{internal:Ce,sdcard:Te,usb:bt,refetch:ae}=hn(),{downloadFile:ie,downloadDir:yt,downloadFiles:gt}=$n(A),{view:qe}=On(R,(e,s)=>{ye.lightbox={sources:e,index:s,visible:!0}}),$t=q(parseInt(((He=F.page)==null?void 0:He.toString())??"1")),wt=Re(()=>{const e=[];let s=i.parent;for(;s&&s!==W.value;)e.unshift({path:s,name:zn(s)}),s=s.substring(0,s.lastIndexOf("/"));return e.unshift({path:W.value,name:Lt()}),e}),Ie=q(!0),{loading:ce,fetch:H}=mn({handle:async(e,s)=>{if(Ie.value=!1,G.value=!1,x.value=!1,s)wn(h(s),"error");else{const C=[];for(const L of e.files)C.push(Cn(L,A.value));v.value=C,V.value=C.length}},document:Tn,variables:()=>({offset:($t.value-1)*We,limit:We,query:S.value?S.value:`parent:${W}`,sortBy:se.value}),options:{fetchPolicy:"cache-and-network"},appApi:!0}),{loading:De,canPaste:Se,copy:de,cut:Ve,paste:re}=vn(v,dt,ct,H,ae),{input:Ct,upload:Tt,uploadChanged:Ee}=Ke(le),{input:qt,upload:It,uploadChanged:Fe}=Ke(le),{loading:Dt,mutate:St,onDone:Vt}=fn({document:qn,appApi:!0});Vt(e=>{gt(e.data.setTempValue.key),D()});const Et=()=>{St({key:An(),value:JSON.stringify($.value.map(e=>({path:e})))})},ue=e=>{e.forEach(s=>{Qn(v.value,C=>C.id===s.id)}),D(),ae()},Ft=()=>{X(Pe,{files:v.value.filter(e=>$.value.includes(e.id)),onDone:e=>{ue(e)}})};function Lt(){if(i.linkName==="sdcard")return h("sdcard");if(i.linkName==="app")return h("app_name");if(i.linkName.startsWith("usb")){const e=parseInt(i.linkName.substring(3));return`${h("usb_storage")} ${e}`}return h("internal_storage")}function Le(){var e,s,C,L;if(i.linkName==="sdcard")return`${h("storage_free_total",{free:E(((e=Te.value)==null?void 0:e.freeBytes)??0),total:E(((s=Te.value)==null?void 0:s.totalBytes)??0)})}`;if(i.linkName==="app")return h("app_name");if(i.linkName.startsWith("usb")){const j=parseInt(i.linkName.substring(3)),T=bt.value[j-1];return`${h("storage_free_total",{free:E((T==null?void 0:T.freeBytes)??0),total:E((T==null?void 0:T.totalBytes)??0)})}`}return`${E(((C=Ce.value)==null?void 0:C.freeBytes)??0)} / ${E(((L=Ce.value)==null?void 0:L.totalBytes)??0,!0,0)}`}function _e(e){D(),i.parent=e;const s=Z(i);Ze(be,Ne(s))}function Ne(e){return`/files?q=${e}`}function Nt(e){if(e.isDir){_e(e.path);return}Oe(e.name)?window.open(Qe(A.value,e.path),"_blank"):Ge(e.name)?qe(v.value,e):ie(e.path)}function Bt(e,s){s.isDir||(e.stopPropagation(),Oe(s.name)?window.open(Qe(A.value,s.path),"_blank"):Ge(s.name)?qe(v.value,s):ie(s.path))}function Mt(e,s){x.value=!0,se.value=s,e.close()}function zt(){G.value=!0,H()}const At=()=>{_t.value=i.parent,X(xe,{title:h("name"),placeholder:h("name"),mutation:ht,getVariables:pt})};function Be(e,s){Tt(s),e.close()}function Me(e,s){It(s),e.close()}function Ht(){de($.value),D()}function Ut(){Ve($.value),D()}function Rt(){re(i.parent)}function Kt(e,s){de([s.id]),re(i.parent),e.close()}function Pt(e,s){Ve([s.id]),e.close()}function Ot(e,s){de([s.id]),e.close()}function Qt(e,s){re(s.path),e.close()}function Gt(e,s){mt.value=s,X(xe,{title:h("rename"),placeholder:h("name"),value:s.name,mutation:ft,getVariables:kt,done:vt}),e.close()}function xt(e){X(Pe,{files:[e],onDone:ue})}const ze=e=>{e.status==="done"&&setTimeout(()=>{H(),ae()},1e3)},Ae=e=>{ue([e.item])};function Wt(e){ut(e,i.parent)}return kn(()=>{var e;S.value=Hn(((e=F.q)==null?void 0:e.toString())??""),Y(i,S.value),H(),J.on("upload_task_done",ze),J.on("file_deleted",Ae),window.addEventListener("keydown",Q),window.addEventListener("keyup",ve)}),bn(()=>{J.off("upload_task_done",ze),J.off("file_deleted",Ae),window.removeEventListener("keydown",Q),window.removeEventListener("keyup",ve)}),(e,s)=>{const C=Mo,L=Eo,j=Un,T=Rn,jt=qo,Xt=oo,Ue=jn,U=In,Jt=Wn,Yt=xn,Zt=Gn,en=Kn,tn=Pn,nn=on,m=Ye("tooltip");return n(),o(g,null,[t("div",Ao,[t("md-checkbox",{"touch-target":"wrapper",onChange:s[0]||(s[0]=(...c)=>l(P)&&l(P)(...c)),checked:l(K),indeterminate:!l(K)&&l(w)},null,40,Ho),l($).length?(n(),o("span",Uo,d(e.$t("x_selected",{count:l(M)?l(V).toLocaleString():l($).length.toLocaleString()})),1)):(n(),o("div",Ro,[(n(!0),o(g,null,he(wt.value,(c,a)=>(n(),o(g,{key:c.path},[a===0?(n(),o(g,{key:0},[c.path===i.parent?_((n(),o("span",Ko,[me(d(c.name)+" ("+d(l(V))+")",1)])),[[m,Le()]]):_((n(),o("a",{key:1,href:"#",onClick:u(r=>_e(c.path),["stop","prevent"])},[me(d(c.name),1)],8,Po)),[[m,Le()]])],64)):(n(),o(g,{key:1},[c.path===i.parent?(n(),o("span",Oo,d(c.name)+" ("+d(l(V))+")",1)):(n(),o("a",{key:1,href:"#",onClick:u(r=>_e(c.path),["stop","prevent"])},d(c.name),9,Qo))],64))],64))),128))])),l(w)?(n(),o(g,{key:2},[_((n(),o("button",{class:"btn-icon",onClick:u(Ht,["stop"])},[Go,p(C)])),[[m,e.$t("copy")]]),_((n(),o("button",{class:"btn-icon",onClick:u(Ut,["stop"])},[xo,p(L)])),[[m,e.$t("cut")]]),_((n(),o("button",{class:"btn-icon",onClick:u(Ft,["stop"])},[Wo,p(j)])),[[m,e.$t("delete")]]),_((n(),o("button",{class:"btn-icon",onClick:u(Et,["stop"])},[jo,l(Dt)?(n(),o("md-circular-progress",Xo)):(n(),B(T,{key:1}))])),[[m,e.$t("download")]])],64)):I("",!0),t("div",Jo,[i.linkName!=="app"?(n(),B(jt,{key:0,filter:i,parent:W.value,"get-url":Ne},null,8,["filter","parent"])):I("",!0),_((n(),o("button",{class:"btn-icon",onClick:At},[Yo,p(Xt)])),[[m,e.$t("create_folder")]]),p(U,null,{content:y(c=>[t("md-menu-item",{onClick:u(a=>Be(c,i.parent),["stop"])},[t("div",ns,d(e.$t("upload_files")),1)],8,ts),t("md-menu-item",{onClick:u(a=>Me(c,i.parent),["stop"])},[t("div",ss,d(e.$t("upload_folder")),1)],8,os)]),default:y(()=>[_((n(),o("button",Zo,[es,p(Ue)])),[[m,e.$t("upload")]])]),_:1}),l(Se)()?_((n(),o("button",{key:1,disabled:l(De),class:"btn-icon",onClick:Rt},[as,l(De)?(n(),o("md-circular-progress",is)):(n(),B(Jt,{key:1}))],8,ls)),[[m,e.$t("paste")]]):I("",!0),_((n(),o("button",{class:"btn-icon",disabled:G.value,onClick:zt},[ds,G.value?(n(),o("md-circular-progress",rs)):(n(),B(Yt,{key:1}))],8,cs)),[[m,e.$t("refresh")]]),p(U,null,{content:y(c=>[t("div",hs,[(n(!0),o(g,null,he(l(it),a=>(n(),o("md-menu-item",{onClick:r=>Mt(c,a.value),key:a.value,selected:a.value===l(se)},[t("div",vs,d(e.$t(a.label)),1)],8,ms))),128))])]),default:y(()=>[_((n(),o("button",{class:"btn-icon",disabled:x.value},[_s,x.value?(n(),o("md-circular-progress",ps)):(n(),B(Zt,{key:1}))],8,us)),[[m,e.$t("sort")]])]),_:1})])]),l(ce)&&Ie.value?(n(),o("div",fs,[(n(),o(g,null,he(20,c=>t("section",{class:"file-item selectable-card-skeleton",key:c},[t("div",ks,[bs,t("span",ys,d(c),1)]),gs])),64))])):I("",!0),t("div",{class:"scroller-wrapper",onDragover:s[4]||(s[4]=u((...c)=>l($e)&&l($e)(...c),["stop","prevent"]))},[_(t("div",{class:"drag-mask",onDrop:u(Wt,["stop","prevent"]),onDragleave:s[1]||(s[1]=u((...c)=>l(we)&&l(we)(...c),["stop","prevent"]))},d(e.$t("release_to_send_files")),545),[[yn,l(rt)]]),v.value.length>0?(n(),B(l(Fn),{key:0,class:"scroller","data-key":"id","data-sources":v.value,"estimate-size":80},{item:y(({index:c,item:a})=>[t("section",{class:Dn(["file-item selectable-card",{selected:l($).includes(a.id),selecting:l(z).includes(a.id)}]),onClick:u(r=>l(ee)(r,a,c,()=>{Nt(a)}),["stop"]),onMouseover:r=>l(te)(r,c)},[t("div",ws,[l(z).includes(a.id)?(n(),o("md-checkbox",{key:0,class:"checkbox","touch-target":"wrapper",onClick:u(r=>l(O)(r,a,c),["stop"]),checked:l(oe)},null,8,Cs)):(n(),o("md-checkbox",{key:1,class:"checkbox","touch-target":"wrapper",onClick:u(r=>l(O)(r,a,c),["stop"]),checked:l($).includes(a.id)},null,8,Ts)),t("span",qs,[p(en,{id:c+1,raw:a},null,8,["id","raw"])])]),t("div",{class:"image",onClick:r=>Bt(r,a)},[a.isDir?(n(),o("img",Ds)):(n(),o(g,{key:1},[ke.value.includes(a.id)?(n(),o("img",Ss)):!fe.value.includes(a.id)&&a.fileId?(n(),o("img",{key:1,class:"image-thumb",src:l(Sn)(a.fileId,"&w=50&h=50"),onError:r=>lt(a.id)},null,40,Vs)):a.extension?(n(),o("img",{key:2,src:`/ficons/${a.extension}.svg`,class:"svg",onError:r=>at(a.id)},null,40,Es)):(n(),o("img",Fs))],64))],8,Is),t("div",Ls,d(a.name),1),t("div",Ns,[a.isDir?(n(),o("span",Bs,d(e.$t("x_items",a.children)),1)):(n(),o("span",Ms,d(l(E)(a.size)),1)),_((n(),o("span",null,[me(d(l(En)(a.updatedAt)),1)])),[[m,l(Vn)(a.updatedAt)]])]),t("div",zs,[a.isDir?(n(),o(g,{key:0},[_((n(),o("button",{class:"btn-icon sm",onClick:u(r=>l(yt)(a.path),["stop"])},[Hs,p(T)],8,As)),[[m,e.$t("download")]]),p(U,null,{content:y(r=>[t("md-menu-item",{onClick:u(N=>Be(r,a.path),["stop"])},[t("div",Ps,d(e.$t("upload_files")),1)],8,Ks),t("md-menu-item",{onClick:u(N=>Me(r,a.path),["stop"])},[t("div",Qs,d(e.$t("upload_folder")),1)],8,Os)]),default:y(()=>[_((n(),o("button",Us,[Rs,p(Ue)])),[[m,e.$t("upload")]])]),_:2},1024)],64)):_((n(),o("button",{key:1,class:"btn-icon sm",onClick:u(r=>l(ie)(a.path),["stop"])},[xs,p(T)],8,Gs)),[[m,e.$t("download")]]),_((n(),o("button",{class:"btn-icon sm",onClick:u(r=>xt(a),["stop"])},[js,p(j)],8,Ws)),[[m,e.$t("delete")]]),p(U,null,{content:y(()=>[t("section",Ys,[t("div",Zs,[t("div",el,d(e.$t("path")),1),t("div",tl,d(a.path),1)])])]),default:y(()=>[_((n(),o("button",Xs,[Js,p(tn)])),[[m,e.$t("info")]])]),_:2},1024),p(U,null,{content:y(r=>[t("md-menu-item",{onClick:u(N=>Kt(r,a),["stop"])},[t("div",ll,d(e.$t("duplicate")),1)],8,sl),t("md-menu-item",{onClick:u(N=>Pt(r,a),["stop"])},[t("div",il,d(e.$t("cut")),1)],8,al),t("md-menu-item",{onClick:u(N=>Ot(r,a),["stop"])},[t("div",dl,d(e.$t("copy")),1)],8,cl),a.isDir&&l(Se)()?(n(),o("md-menu-item",{key:0,onClick:u(N=>Qt(r,a),["stop"])},[t("div",ul,d(e.$t("paste")),1)],8,rl)):I("",!0),t("md-menu-item",{onClick:u(N=>Gt(r,a),["stop"])},[t("div",pl,d(e.$t("rename")),1)],8,_l)]),default:y(()=>[_((n(),o("button",nl,[ol,p(nn)])),[[m,e.$t("actions")]])]),_:2},1024)])],42,$s)]),_:1},8,["data-sources"])):I("",!0),!l(ce)&&v.value.length===0?(n(),o("div",hl,d(e.$t(l(Ln)(l(ce),l(ge).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):I("",!0),t("input",{ref_key:"fileInput",ref:Ct,style:{display:"none"},type:"file",multiple:"",onChange:s[2]||(s[2]=(...c)=>l(Ee)&&l(Ee)(...c))},null,544),t("input",{ref_key:"dirFileInput",ref:qt,style:{display:"none"},type:"file",multiple:"",webkitdirectory:"",mozdirectory:"",directory:"",onChange:s[3]||(s[3]=(...c)=>l(Fe)&&l(Fe)(...c))},null,544)],32)],64)}}}),Il=ot(ml,[["__scopeId","data-v-5dc7d0ab"]]);export{Il as default};

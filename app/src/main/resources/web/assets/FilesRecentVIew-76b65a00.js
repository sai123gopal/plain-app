import{d as W,u as X,r as v,s as J,a as K,bj as Z,ar as q,Z as P,b3 as Y,H as ee,o as n,c as a,e as i,f as k,j as s,w as te,l as c,N as x,Q as C,g as d,F as b,A as se,z as oe,b4 as D,b5 as F,an as ne,k as f,T as ae,m as ie,a9 as le,b6 as ce,av as de,b9 as ue,ba as re,_ as _e}from"./index-cf22a9d8.js";import{_ as me}from"./download-rounded-1a2e3353.js";import{_ as pe}from"./Breadcrumb-99ff7c19.js";import{c as he}from"./index-a6eeb602.js";import{n as ve}from"./list-6498ebd9.js";const ke={class:"v-toolbar"},be={class:"right-actions"},fe=["onClick","title"],we={class:"form-check mt-2 me-3 ms-3"},ye={class:"form-check-label",for:"select-mode"},Ve={class:"panel-container"},ge={key:0,class:"file-items"},Ie=["onClick","onDblclick","onContextmenu"],Te=["onUpdate:modelValue"],xe=["src"],Ce={class:"title"},De={style:{"font-size":"0.75rem"}},Fe={key:1,class:"no-data-placeholder"},Re={key:0,class:"file-item-info"},Ee=W({__name:"FilesRecentVIew",setup(Ae){const{t:h}=X(),w=v([]),u=v(!1),{app:m}=J(K()),{loading:R,files:r}=Z(m),{visible:E,index:A,view:N,hide:S}=q(),{downloadFile:y,downloadDir:$,downloadFiles:M}=le(m),{view:V}=ue(w,N),p=v(null),{mutate:U,onDone:z}=P({document:Y,appApi:!0});z(e=>{M(e.data.setTempValue.key)});const g=()=>{const e=[];return r.value.forEach(o=>{o.checked&&e.push({path:o.path})}),e},H=()=>{U({key:ce(),value:JSON.stringify(g())})},L=ee(()=>g().length>0);function B(e){if(u.value){e.checked=!e.checked;return}p.value=e}function I(e){return D(e.name)||F(e.name)||re(e.name)}function G(e){I(e)?V(r.value,e):y(e.path)}function O(e,o){e.preventDefault();let l;o.isDir?l=[{label:h("download"),onClick:()=>{$(o.path)}}]:(l=[],I(o)&&l.push({label:h("open"),onClick:()=>{V(r.value,o)}}),l.push({label:h("download"),onClick:()=>{y(o.path)}})),he({x:e.x,y:e.y,items:l})}return(e,o)=>{const l=pe,j=me,Q=de;return n(),a(b,null,[i("div",ke,[k(l,{current:e.$t("recent_files")},null,8,["current"]),i("div",be,[u.value&&s(L)?(n(),a("button",{key:0,type:"button",class:"btn btn-action",onClick:te(H,["stop"]),title:e.$t("download")},[k(j,{class:"bi"})],8,fe)):c("",!0),i("div",we,[x(i("input",{class:"form-check-input","onUpdate:modelValue":o[0]||(o[0]=t=>u.value=t),id:"select-mode",type:"checkbox"},null,512),[[C,u.value]]),i("label",ye,d(e.$t("select_mode")),1)])])]),i("div",Ve,[s(m).permissions.includes("WRITE_EXTERNAL_STORAGE")?(n(),a("div",ge,[(n(!0),a(b,null,se(s(r),t=>{var T;return n(),a("div",{key:t.path,class:oe(["file-item",{active:((T=p.value)==null?void 0:T.path)===t.path}]),onClick:_=>B(t),onDblclick:_=>G(t),onContextmenu:_=>O(_,t)},[u.value?x((n(),a("input",{key:0,class:"form-check-input","onUpdate:modelValue":_=>t.checked=_,type:"checkbox"},null,8,Te)),[[C,t.checked]]):c("",!0),s(D)(t.name)||s(F)(t.name)?(n(),a("img",{key:1,src:s(ne)(t.fileId)+"&w=50&h=50",width:"50",height:"50"},null,8,xe)):c("",!0),i("div",Ce,[f(d(t.name)+" ",1),i("div",De,[f(d(s(ae)(t.updatedAt)),1),t.isDir?c("",!0):(n(),a(b,{key:0},[f(", "+d(s(ie)(t.size)),1)],64))])])],42,Ie)}),128))])):c("",!0),s(r).length===0?(n(),a("div",Fe,d(e.$t(s(ve)(s(R),s(m).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):c("",!0)]),p.value?(n(),a("div",Re,d(e.$t("path"))+": "+d(p.value.path),1)):c("",!0),k(Q,{visible:s(E),index:s(A),sources:w.value,onHide:s(S)},null,8,["visible","index","sources","onHide"])],64)}}});const ze=_e(Ee,[["__scopeId","data-v-b89da663"]]);export{ze as default};
